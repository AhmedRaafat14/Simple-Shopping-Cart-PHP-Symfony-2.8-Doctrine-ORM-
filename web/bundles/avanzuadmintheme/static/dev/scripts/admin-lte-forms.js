(function($){"use strict";var Color=function(val){this.value={h:0,s:0,b:0,a:1};this.origFormat=null;if(val){if(val.toLowerCase!==undefined){this.setColor(val)}else if(val.h!==undefined){this.value=val}}};Color.prototype={constructor:Color,_sanitizeNumber:function(val){if(typeof val==="number"){return val}if(isNaN(val)||val===null||val===""||val===undefined){return 1}if(val.toLowerCase!==undefined){return parseFloat(val)}return 1},setColor:function(strVal){strVal=strVal.toLowerCase();this.value=this.stringToHSB(strVal)||{h:0,s:0,b:0,a:1}},stringToHSB:function(strVal){strVal=strVal.toLowerCase();var that=this,result=false;$.each(this.stringParsers,function(i,parser){var match=parser.re.exec(strVal),values=match&&parser.parse.apply(that,[match]),format=parser.format||"rgba";if(values){if(format.match(/hsla?/)){result=that.RGBtoHSB.apply(that,that.HSLtoRGB.apply(that,values))}else{result=that.RGBtoHSB.apply(that,values)}that.origFormat=format;return false}return true});return result},setHue:function(h){this.value.h=1-h},setSaturation:function(s){this.value.s=s},setBrightness:function(b){this.value.b=1-b},setAlpha:function(a){this.value.a=parseInt((1-a)*100,10)/100},toRGB:function(h,s,v,a){h=h||this.value.h;s=s||this.value.s;v=v||this.value.b;a=a||this.value.a;var r,g,b,i,f,p,q,t;if(h&&s===undefined&&v===undefined){s=h.s,v=h.v,h=h.h}i=Math.floor(h*6);f=h*6-i;p=v*(1-s);q=v*(1-f*s);t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q;break}return{r:Math.floor(r*255),g:Math.floor(g*255),b:Math.floor(b*255),a:a}},toHex:function(h,s,b,a){var rgb=this.toRGB(h,s,b,a);return"#"+(1<<24|parseInt(rgb.r)<<16|parseInt(rgb.g)<<8|parseInt(rgb.b)).toString(16).substr(1)},toHSL:function(h,s,b,a){h=h||this.value.h;s=s||this.value.s;b=b||this.value.b;a=a||this.value.a;var H=h,L=(2-s)*b,S=s*b;if(L>0&&L<=1){S/=L}else{S/=2-L}L/=2;if(S>1){S=1}return{h:H,s:S,l:L,a:a}},RGBtoHSB:function(r,g,b,a){r/=255;g/=255;b/=255;var H,S,V,C;V=Math.max(r,g,b);C=V-Math.min(r,g,b);H=C===0?null:V===r?(g-b)/C:V===g?(b-r)/C+2:(r-g)/C+4;H=(H+360)%6*60/360;S=C===0?0:C/V;return{h:this._sanitizeNumber(H),s:S,b:V,a:this._sanitizeNumber(a)}},HueToRGB:function(p,q,h){if(h<0){h+=1}else if(h>1){h-=1}if(h*6<1){return p+(q-p)*h*6}else if(h*2<1){return q}else if(h*3<2){return p+(q-p)*(2/3-h)*6}else{return p}},HSLtoRGB:function(h,s,l,a){if(s<0){s=0}var q;if(l<=.5){q=l*(1+s)}else{q=l+s-l*s}var p=2*l-q;var tr=h+1/3;var tg=h;var tb=h-1/3;var r=Math.round(this.HueToRGB(p,q,tr)*255);var g=Math.round(this.HueToRGB(p,q,tg)*255);var b=Math.round(this.HueToRGB(p,q,tb)*255);return[r,g,b,this._sanitizeNumber(a)]},toString:function(format){format=format||"rgba";switch(format){case"rgb":{var rgb=this.toRGB();return"rgb("+rgb.r+","+rgb.g+","+rgb.b+")"}break;case"rgba":{var rgb=this.toRGB();return"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+rgb.a+")"}break;case"hsl":{var hsl=this.toHSL();return"hsl("+Math.round(hsl.h*360)+","+Math.round(hsl.s*100)+"%,"+Math.round(hsl.l*100)+"%)"}break;case"hsla":{var hsl=this.toHSL();return"hsla("+Math.round(hsl.h*360)+","+Math.round(hsl.s*100)+"%,"+Math.round(hsl.l*100)+"%,"+hsl.a+")"}break;case"hex":{return this.toHex()}break;default:{return false}break}},stringParsers:[{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16),1]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16),1]}},{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(execResult){return[execResult[1],execResult[2],execResult[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(execResult){var hexval=this.colorNameToHex(execResult[0])||"#000000";var match=this.stringParsers[0].re.exec(hexval),values=match&&this.stringParsers[0].parse.apply(this,[match]);return values}}],colorNameToHex:function(name){var colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(typeof colors[name.toLowerCase()]!=="undefined"){return colors[name.toLowerCase()]}return false}};var defaults={horizontal:false,inline:false,color:false,format:false,input:"input",container:false,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:false},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:false}},template:'<div class="colorpicker dropdown-menu">'+'<div class="colorpicker-saturation"><i><b></b></i></div>'+'<div class="colorpicker-hue"><i></i></div>'+'<div class="colorpicker-alpha"><i></i></div>'+'<div class="colorpicker-color"><div /></div>'+"</div>"};var Colorpicker=function(element,options){this.element=$(element).addClass("colorpicker-element");this.options=$.extend({},defaults,this.element.data(),options);this.component=this.options.component;this.component=this.component!==false?this.element.find(this.component):false;if(this.component&&this.component.length===0){this.component=false}this.container=this.options.container===true?this.element:this.options.container;this.container=this.container!==false?$(this.container):false;this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):false;if(this.input&&this.input.length===0){this.input=false}this.color=new Color(this.options.color!==false?this.options.color:this.getValue());this.format=this.options.format!==false?this.options.format:this.color.origFormat;this.picker=$(this.options.template);if(this.options.inline){this.picker.addClass("colorpicker-inline colorpicker-visible")}else{this.picker.addClass("colorpicker-hidden")}if(this.options.horizontal){this.picker.addClass("colorpicker-horizontal")}if(this.format==="rgba"||this.format==="hsla"){this.picker.addClass("colorpicker-with-alpha")}this.picker.on("mousedown.colorpicker",$.proxy(this.mousedown,this));this.picker.appendTo(this.container?this.container:$("body"));if(this.input!==false){this.input.on({"keyup.colorpicker":$.proxy(this.keyup,this)});if(this.component===false){this.element.on({"focus.colorpicker":$.proxy(this.show,this)})}if(this.options.inline===false){this.element.on({"focusout.colorpicker":$.proxy(this.hide,this)})}}if(this.component!==false){this.component.on({"click.colorpicker":$.proxy(this.show,this)})}if(this.input===false&&this.component===false){this.element.on({"click.colorpicker":$.proxy(this.show,this)})}this.update();$($.proxy(function(){this.element.trigger("create")},this))};Colorpicker.version="2.0.0-beta";Colorpicker.Color=Color;Colorpicker.prototype={constructor:Colorpicker,destroy:function(){this.picker.remove();this.element.removeData("colorpicker").off(".colorpicker");if(this.input!==false){this.input.off(".colorpicker")}if(this.component!==false){this.component.off(".colorpicker")}this.element.removeClass("colorpicker-element");this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==false){return false}var offset=this.component?this.component.offset():this.element.offset();this.picker.css({top:offset.top+(this.component?this.component.outerHeight():this.element.outerHeight()),left:offset.left})},show:function(e){if(this.isDisabled()){return false}this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden");this.reposition();$(window).on("resize.colorpicker",$.proxy(this.reposition,this));if(!this.hasInput()&&e){if(e.stopPropagation&&e.preventDefault){e.stopPropagation();e.preventDefault()}}if(this.options.inline===false){$(window.document).on({"mousedown.colorpicker":$.proxy(this.hide,this)})}this.element.trigger({type:"showPicker",color:this.color})},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible");$(window).off("resize.colorpicker",this.reposition);$(document).off({"mousedown.colorpicker":this.hide});this.update();this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(val){val=val||this.color.toString(this.format);this.element.data("color",val);return val},updateInput:function(val){val=val||this.color.toString(this.format);if(this.input!==false){this.input.prop("value",val)}return val},updatePicker:function(val){if(val!==undefined){this.color=new Color(val)}var sl=this.options.horizontal===false?this.options.sliders:this.options.slidersHorz;var icns=this.picker.find("i");if(icns.length===0){return}if(this.options.horizontal===false){sl=this.options.sliders;icns.eq(1).css("top",sl.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",sl.alpha.maxTop*(1-this.color.value.a))}else{sl=this.options.slidersHorz;icns.eq(1).css("left",sl.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",sl.alpha.maxLeft*(1-this.color.value.a))}icns.eq(0).css({top:sl.saturation.maxTop-this.color.value.b*sl.saturation.maxTop,left:this.color.value.s*sl.saturation.maxLeft});this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1));this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex());this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format));return val},updateComponent:function(val){val=val||this.color.toString(this.format);if(this.component!==false){var icn=this.component.find("i").eq(0);if(icn.length>0){icn.css({backgroundColor:val})}else{this.component.css({backgroundColor:val})}}return val},update:function(force){var val=this.updateComponent();if(this.getValue(false)!==false||force===true){this.updateInput(val);this.updateData(val)}this.updatePicker();return val},setValue:function(val){this.color=new Color(val);this.update();this.element.trigger({type:"changeColor",color:this.color,value:val})},getValue:function(defaultValue){defaultValue=defaultValue===undefined?"#000000":defaultValue;var val;if(this.hasInput()){val=this.input.val()}else{val=this.element.data("color")}if(val===undefined||val===""||val===null){val=defaultValue}return val},hasInput:function(){return this.input!==false},isDisabled:function(){if(this.hasInput()){return this.input.prop("disabled")===true}return false},disable:function(){if(this.hasInput()){this.input.prop("disabled",true);return true}return false},enable:function(){if(this.hasInput()){this.input.prop("disabled",false);return true}return false},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(e){e.stopPropagation();e.preventDefault();var target=$(e.target);var zone=target.closest("div");var sl=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!zone.is(".colorpicker")){if(zone.is(".colorpicker-saturation")){this.currentSlider=$.extend({},sl.saturation)}else if(zone.is(".colorpicker-hue")){this.currentSlider=$.extend({},sl.hue)}else if(zone.is(".colorpicker-alpha")){this.currentSlider=$.extend({},sl.alpha)}else{return false}var offset=zone.offset();this.currentSlider.guide=zone.find("i")[0].style;this.currentSlider.left=e.pageX-offset.left;this.currentSlider.top=e.pageY-offset.top;this.mousePointer={left:e.pageX,top:e.pageY};$(document).on({"mousemove.colorpicker":$.proxy(this.mousemove,this),"mouseup.colorpicker":$.proxy(this.mouseup,this)}).trigger("mousemove")}return false},mousemove:function(e){e.stopPropagation();e.preventDefault();var left=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left)));var top=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));this.currentSlider.guide.left=left+"px";this.currentSlider.guide.top=top+"px";if(this.currentSlider.callLeft){this.color[this.currentSlider.callLeft].call(this.color,left/100)}if(this.currentSlider.callTop){this.color[this.currentSlider.callTop].call(this.color,top/100)}this.update(true);this.element.trigger({type:"changeColor",color:this.color});return false},mouseup:function(e){e.stopPropagation();e.preventDefault();$(document).off({"mousemove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup});return false},keyup:function(e){if(e.keyCode===38){if(this.color.value.a<1){this.color.value.a=Math.round((this.color.value.a+.01)*100)/100}this.update(true)}else if(e.keyCode===40){if(this.color.value.a>0){this.color.value.a=Math.round((this.color.value.a-.01)*100)/100}this.update(true)}else{var val=this.input.val();this.color=new Color(val);if(this.getValue(false)!==false){this.updateData();this.updateComponent();this.updatePicker()}}this.element.trigger({type:"changeColor",color:this.color,value:val})}};$.colorpicker=Colorpicker;$.fn.colorpicker=function(option){return this.each(function(){var $this=$(this),inst=$this.data("colorpicker"),options=typeof option==="object"?option:{};if(!inst&&typeof option!=="string"){$this.data("colorpicker",new Colorpicker(this,options))}else{if(typeof option==="string"){inst[option].apply(inst,Array.prototype.slice.call(arguments,1))}}})};$.fn.colorpicker.constructor=Colorpicker})(window.jQuery);(function(root,factory){if(typeof define==="function"&&define.amd){define(["moment","jquery","exports"],function(momentjs,$,exports){root.daterangepicker=factory(root,exports,momentjs,$)})}else if(typeof exports!=="undefined"){var momentjs=require("moment");var jQuery;try{jQuery=require("jquery")}catch(err){jQuery=window.jQuery;if(!jQuery)throw new Error("jQuery dependency not found")}factory(root,exports,momentjs,jQuery)}else{root.daterangepicker=factory(root,{},root.moment,root.jQuery||root.Zepto||root.ender||root.$)}})(this,function(root,daterangepicker,moment,$){var DateRangePicker=function(element,options,cb){this.parentEl="body";this.element=$(element);this.isShowing=false;var DRPTemplate='<div class="daterangepicker dropdown-menu">'+'<div class="calendar first left"></div>'+'<div class="calendar second right"></div>'+'<div class="ranges">'+'<div class="range_inputs">'+'<div class="daterangepicker_start_input">'+'<label for="daterangepicker_start"></label>'+'<input class="input-mini" type="text" name="daterangepicker_start" value="" />'+"</div>"+'<div class="daterangepicker_end_input">'+'<label for="daterangepicker_end"></label>'+'<input class="input-mini" type="text" name="daterangepicker_end" value="" />'+"</div>"+'<button class="applyBtn" disabled="disabled"></button>&nbsp;'+'<button class="cancelBtn"></button>'+"</div>"+"</div>"+"</div>";if(typeof options!=="object"||options===null)options={};this.parentEl=typeof options==="object"&&options.parentEl&&$(options.parentEl).length?$(options.parentEl):$(this.parentEl);this.container=$(DRPTemplate).appendTo(this.parentEl);this.setOptions(options,cb);this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",$.proxy(this.updateTime,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this));if(this.element.is("input")){this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.updateFromControl,this),"keydown.daterangepicker":$.proxy(this.keydown,this)})}else{this.element.on("click.daterangepicker",$.proxy(this.toggle,this))}};DateRangePicker.prototype={constructor:DateRangePicker,setOptions:function(options,callback){this.startDate=moment().startOf("day");this.endDate=moment().endOf("day");this.timeZone=moment().utcOffset();this.minDate=false;this.maxDate=false;this.dateLimit=false;this.showDropdowns=false;this.showWeekNumbers=false;this.timePicker=false;this.timePickerSeconds=false;this.timePickerIncrement=30;this.timePicker12Hour=true;this.singleDatePicker=false;this.ranges={};this.opens="right";if(this.element.hasClass("pull-right"))this.opens="left";this.drops="down";if(this.element.hasClass("dropup"))this.drops="up";this.buttonClasses=["btn","btn-small btn-sm"];this.applyClass="btn-success";this.cancelClass="btn-default";this.format="MM/DD/YYYY";this.separator=" - ";this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData()._week.dow};this.cb=function(){};if(typeof options.format==="string")this.format=options.format;if(typeof options.separator==="string")this.separator=options.separator;if(typeof options.startDate==="string")this.startDate=moment(options.startDate,this.format);if(typeof options.endDate==="string")this.endDate=moment(options.endDate,this.format);if(typeof options.minDate==="string")this.minDate=moment(options.minDate,this.format);if(typeof options.maxDate==="string")this.maxDate=moment(options.maxDate,this.format);if(typeof options.startDate==="object")this.startDate=moment(options.startDate);if(typeof options.endDate==="object")this.endDate=moment(options.endDate);if(typeof options.minDate==="object")this.minDate=moment(options.minDate);if(typeof options.maxDate==="object")this.maxDate=moment(options.maxDate);if(typeof options.applyClass==="string")this.applyClass=options.applyClass;if(typeof options.cancelClass==="string")this.cancelClass=options.cancelClass;if(typeof options.dateLimit==="object")this.dateLimit=options.dateLimit;if(typeof options.locale==="object"){if(typeof options.locale.daysOfWeek==="object"){this.locale.daysOfWeek=options.locale.daysOfWeek.slice()}if(typeof options.locale.monthNames==="object"){this.locale.monthNames=options.locale.monthNames.slice()}if(typeof options.locale.firstDay==="number"){this.locale.firstDay=options.locale.firstDay}if(typeof options.locale.applyLabel==="string"){this.locale.applyLabel=options.locale.applyLabel}if(typeof options.locale.cancelLabel==="string"){this.locale.cancelLabel=options.locale.cancelLabel}if(typeof options.locale.fromLabel==="string"){this.locale.fromLabel=options.locale.fromLabel}if(typeof options.locale.toLabel==="string"){this.locale.toLabel=options.locale.toLabel}if(typeof options.locale.weekLabel==="string"){this.locale.weekLabel=options.locale.weekLabel}if(typeof options.locale.customRangeLabel==="string"){this.locale.customRangeLabel=options.locale.customRangeLabel}}if(typeof options.opens==="string")this.opens=options.opens;if(typeof options.drops==="string")this.drops=options.drops;if(typeof options.showWeekNumbers==="boolean"){this.showWeekNumbers=options.showWeekNumbers}if(typeof options.buttonClasses==="string"){this.buttonClasses=[options.buttonClasses]}if(typeof options.buttonClasses==="object"){this.buttonClasses=options.buttonClasses}if(typeof options.showDropdowns==="boolean"){this.showDropdowns=options.showDropdowns}if(typeof options.singleDatePicker==="boolean"){this.singleDatePicker=options.singleDatePicker;if(this.singleDatePicker){this.endDate=this.startDate.clone()}}if(typeof options.timePicker==="boolean"){this.timePicker=options.timePicker}if(typeof options.timePickerSeconds==="boolean"){this.timePickerSeconds=options.timePickerSeconds}if(typeof options.timePickerIncrement==="number"){this.timePickerIncrement=options.timePickerIncrement}if(typeof options.timePicker12Hour==="boolean"){this.timePicker12Hour=options.timePicker12Hour}if(this.locale.firstDay!=0){var iterator=this.locale.firstDay;while(iterator>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());iterator--}}var start,end,range;if(typeof options.startDate==="undefined"&&typeof options.endDate==="undefined"){if($(this.element).is("input[type=text]")){var val=$(this.element).val(),split=val.split(this.separator);start=end=null;if(split.length==2){start=moment(split[0],this.format);end=moment(split[1],this.format)}else if(this.singleDatePicker&&val!==""){start=moment(val,this.format);end=moment(val,this.format)}if(start!==null&&end!==null){this.startDate=start;this.endDate=end}}}if(typeof options.timeZone==="string"||typeof options.timeZone==="number"){if(typeof options.timeZone==="string"&&typeof moment.tz!=="undefined"){this.timeZone=moment.tz.zone(options.timeZone).parse(new Date)*-1}else{this.timeZone=options.timeZone}this.startDate.utcOffset(this.timeZone);this.endDate.utcOffset(this.timeZone)}else{this.timeZone=moment(this.startDate).utcOffset()}if(typeof options.ranges==="object"){for(range in options.ranges){if(typeof options.ranges[range][0]==="string")start=moment(options.ranges[range][0],this.format);else start=moment(options.ranges[range][0]);if(typeof options.ranges[range][1]==="string")end=moment(options.ranges[range][1],this.format);else end=moment(options.ranges[range][1]);if(this.minDate&&start.isBefore(this.minDate))start=moment(this.minDate);if(this.maxDate&&end.isAfter(this.maxDate))end=moment(this.maxDate);if(this.minDate&&end.isBefore(this.minDate)||this.maxDate&&start.isAfter(this.maxDate)){continue}this.ranges[range]=[start,end]}var list="<ul>";for(range in this.ranges){list+="<li>"+range+"</li>"}list+="<li>"+this.locale.customRangeLabel+"</li>";list+="</ul>";this.container.find(".ranges ul").remove();this.container.find(".ranges").prepend(list)}if(typeof callback==="function"){this.cb=callback}if(!this.timePicker){this.startDate=this.startDate.startOf("day");this.endDate=this.endDate.endOf("day")}if(this.singleDatePicker){this.opens="right";this.container.addClass("single");this.container.find(".calendar.right").show();this.container.find(".calendar.left").hide();if(!this.timePicker){this.container.find(".ranges").hide()}else{this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide()}if(!this.container.find(".calendar.right").hasClass("single"))this.container.find(".calendar.right").addClass("single")}else{this.container.removeClass("single");this.container.find(".calendar.right").removeClass("single");this.container.find(".ranges").show()}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.oldChosenLabel=this.chosenLabel;this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute(),this.startDate.second()]),calendar:[]};this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute(),this.endDate.second()]),calendar:[]};if(this.opens=="right"||this.opens=="center"){var first=this.container.find(".calendar.first");var second=this.container.find(".calendar.second");if(second.hasClass("single")){second.removeClass("single");first.addClass("single")}first.removeClass("left").addClass("right");second.removeClass("right").addClass("left");if(this.singleDatePicker){first.show();second.hide()}}if(typeof options.ranges==="undefined"&&!this.singleDatePicker){this.container.addClass("show-calendar")}this.container.removeClass("opensleft opensright").addClass("opens"+this.opens);this.updateView();this.updateCalendars();var c=this.container;$.each(this.buttonClasses,function(idx,val){c.find("button").addClass(val)});this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel);this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel);if(this.applyClass.length)this.container.find(".applyBtn").addClass(this.applyClass);if(this.cancelClass.length)this.container.find(".cancelBtn").addClass(this.cancelClass);this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel)},setStartDate:function(startDate){if(typeof startDate==="string")this.startDate=moment(startDate,this.format).utcOffset(this.timeZone);if(typeof startDate==="object")this.startDate=moment(startDate);if(!this.timePicker)this.startDate=this.startDate.startOf("day");this.oldStartDate=this.startDate.clone();this.updateView();this.updateCalendars();this.updateInputText()},setEndDate:function(endDate){if(typeof endDate==="string")this.endDate=moment(endDate,this.format).utcOffset(this.timeZone);if(typeof endDate==="object")this.endDate=moment(endDate);if(!this.timePicker)this.endDate=this.endDate.endOf("day");this.oldEndDate=this.endDate.clone();this.updateView();this.updateCalendars();this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format));this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format));if(this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)){this.container.find("button.applyBtn").removeAttr("disabled")}else{this.container.find("button.applyBtn").attr("disabled","disabled")}},updateFromControl:function(){if(!this.element.is("input"))return;if(!this.element.val().length)return;var dateString=this.element.val().split(this.separator),start=null,end=null;if(dateString.length===2){start=moment(dateString[0],this.format).utcOffset(this.timeZone);end=moment(dateString[1],this.format).utcOffset(this.timeZone)}if(this.singleDatePicker||start===null||end===null){start=moment(this.element.val(),this.format).utcOffset(this.timeZone);end=start}if(end.isBefore(start))return;this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.startDate=start;this.endDate=end;if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))this.notify();this.updateCalendars()},keydown:function(e){if(e.keyCode===9||e.keyCode===13){this.hide()}},notify:function(){this.updateView();this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var parentOffset={top:0,left:0},containerTop;var parentRightEdge=$(window).width();if(!this.parentEl.is("body")){parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left}if(this.drops=="up")containerTop=this.element.offset().top-this.container.outerHeight()-parentOffset.top;else containerTop=this.element.offset().top+this.element.outerHeight()-parentOffset.top;this.container[this.drops=="up"?"addClass":"removeClass"]("dropup");if(this.opens=="left"){this.container.css({top:containerTop,right:parentRightEdge-this.element.offset().left-this.element.outerWidth(),left:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})
}}else if(this.opens=="center"){this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})}}else{this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left,right:"auto"});if(this.container.offset().left+this.container.outerWidth()>$(window).width()){this.container.css({left:"auto",right:0})}}},toggle:function(e){if(this.element.hasClass("active")){this.hide()}else{this.show()}},show:function(e){if(this.isShowing)return;this.element.addClass("active");this.container.show();this.move();this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e)},this);$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy);this.isShowing=true;this.element.trigger("show.daterangepicker",this)},outsideClick:function(e){var target=$(e.target);if(e.type=="focusin"||target.closest(this.element).length||target.closest(this.container).length||target.closest(".calendar-date").length)return;this.hide()},hide:function(e){if(!this.isShowing)return;$(document).off(".daterangepicker");this.element.removeClass("active");this.container.hide();if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))this.notify();this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.isShowing=false;this.element.trigger("hide.daterangepicker",this)},enterRange:function(e){var label=e.target.innerHTML;if(label==this.locale.customRangeLabel){this.updateView()}else{var dates=this.ranges[label];this.container.find("input[name=daterangepicker_start]").val(dates[0].format(this.format));this.container.find("input[name=daterangepicker_end]").val(dates[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(e){var el=$(e.target);var date=moment(el.val(),this.format);if(!date.isValid())return;var startDate,endDate;if(el.attr("name")==="daterangepicker_start"){startDate=false!==this.minDate&&date.isBefore(this.minDate)?this.minDate:date;endDate=this.endDate}else{startDate=this.startDate;endDate=false!==this.maxDate&&date.isAfter(this.maxDate)?this.maxDate:date}this.setCustomDates(startDate,endDate)},inputsKeydown:function(e){if(e.keyCode===13){this.inputsChanged(e);this.notify()}},updateInputText:function(){if(this.element.is("input")&&!this.singleDatePicker){this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format));this.element.trigger("change")}else if(this.element.is("input")){this.element.val(this.endDate.format(this.format));this.element.trigger("change")}},clickRange:function(e){var label=e.target.innerHTML;this.chosenLabel=label;if(label==this.locale.customRangeLabel){this.showCalendars()}else{var dates=this.ranges[label];this.startDate=dates[0];this.endDate=dates[1];if(!this.timePicker){this.startDate.startOf("day");this.endDate.endOf("day")}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateCalendars();this.updateInputText();this.hideCalendars();this.hide();this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(e){var cal=$(e.target).parents(".calendar");if(cal.hasClass("left")){this.leftCalendar.month.subtract(1,"month")}else{this.rightCalendar.month.subtract(1,"month")}this.updateCalendars()},clickNext:function(e){var cal=$(e.target).parents(".calendar");if(cal.hasClass("left")){this.leftCalendar.month.add(1,"month")}else{this.rightCalendar.month.add(1,"month")}this.updateCalendars()},hoverDate:function(e){var title=$(e.target).attr("data-title");var row=title.substr(1,1);var col=title.substr(3,1);var cal=$(e.target).parents(".calendar");if(cal.hasClass("left")){this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[row][col].format(this.format))}else{this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[row][col].format(this.format))}},setCustomDates:function(startDate,endDate){this.chosenLabel=this.locale.customRangeLabel;if(startDate.isAfter(endDate)){var difference=this.endDate.diff(this.startDate);endDate=moment(startDate).add(difference,"ms");if(this.maxDate&&endDate.isAfter(this.maxDate)){endDate=this.maxDate.clone()}}this.startDate=startDate;this.endDate=endDate;this.updateView();this.updateCalendars()},clickDate:function(e){var title=$(e.target).attr("data-title");var row=title.substr(1,1);var col=title.substr(3,1);var cal=$(e.target).parents(".calendar");var startDate,endDate;if(cal.hasClass("left")){startDate=this.leftCalendar.calendar[row][col];endDate=this.endDate;if(typeof this.dateLimit==="object"){var maxDate=moment(startDate).add(this.dateLimit).startOf("day");if(endDate.isAfter(maxDate)){endDate=maxDate}}}else{startDate=this.startDate;endDate=this.rightCalendar.calendar[row][col];if(typeof this.dateLimit==="object"){var minDate=moment(endDate).subtract(this.dateLimit).startOf("day");if(startDate.isBefore(minDate)){startDate=minDate}}}if(this.singleDatePicker&&cal.hasClass("left")){endDate=startDate.clone()}else if(this.singleDatePicker&&cal.hasClass("right")){startDate=endDate.clone()}cal.find("td").removeClass("active");$(e.target).addClass("active");this.setCustomDates(startDate,endDate);if(!this.timePicker)endDate.endOf("day");if(this.singleDatePicker&&!this.timePicker)this.clickApply()},clickApply:function(e){this.updateInputText();this.hide();this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.chosenLabel=this.oldChosenLabel;this.updateView();this.updateCalendars();this.hide();this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(e){var isLeft=$(e.target).closest(".calendar").hasClass("left"),leftOrRight=isLeft?"left":"right",cal=this.container.find(".calendar."+leftOrRight);var month=parseInt(cal.find(".monthselect").val(),10);var year=cal.find(".yearselect").val();if(!isLeft&&!this.singleDatePicker){if(year<this.startDate.year()||year==this.startDate.year()&&month<this.startDate.month()){month=this.startDate.month();year=this.startDate.year()}}if(this.minDate){if(year<this.minDate.year()||year==this.minDate.year()&&month<this.minDate.month()){month=this.minDate.month();year=this.minDate.year()}}if(this.maxDate){if(year>this.maxDate.year()||year==this.maxDate.year()&&month>this.maxDate.month()){month=this.maxDate.month();year=this.maxDate.year()}}this[leftOrRight+"Calendar"].month.month(month).year(year);this.updateCalendars()},updateTime:function(e){var cal=$(e.target).closest(".calendar"),isLeft=cal.hasClass("left");var hour=parseInt(cal.find(".hourselect").val(),10);var minute=parseInt(cal.find(".minuteselect").val(),10);var second=0;if(this.timePickerSeconds){second=parseInt(cal.find(".secondselect").val(),10)}if(this.timePicker12Hour){var ampm=cal.find(".ampmselect").val();if(ampm==="PM"&&hour<12)hour+=12;if(ampm==="AM"&&hour===12)hour=0}if(isLeft){var start=this.startDate.clone();start.hour(hour);start.minute(minute);start.second(second);this.startDate=start;this.leftCalendar.month.hour(hour).minute(minute).second(second);if(this.singleDatePicker)this.endDate=start.clone()}else{var end=this.endDate.clone();end.hour(hour);end.minute(minute);end.second(second);this.endDate=end;if(this.singleDatePicker)this.startDate=end.clone();this.rightCalendar.month.hour(hour).minute(minute).second(second)}this.updateView();this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),this.leftCalendar.month.second(),"left");this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),this.rightCalendar.month.second(),"right");this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate,"left"));this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate,"right"));this.container.find(".ranges li").removeClass("active");var customRange=true;var i=0;for(var range in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])){customRange=false;this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html()}}else{if(this.startDate.format("YYYY-MM-DD")==this.ranges[range][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[range][1].format("YYYY-MM-DD")){customRange=false;this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html()}}i++}if(customRange){this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html();this.showCalendars()}},buildCalendar:function(month,year,hour,minute,second,side){var daysInMonth=moment([year,month]).daysInMonth();var firstDay=moment([year,month,1]);var lastDay=moment([year,month,daysInMonth]);var lastMonth=moment(firstDay).subtract(1,"month").month();var lastYear=moment(firstDay).subtract(1,"month").year();var daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth();var dayOfWeek=firstDay.day();var i;var calendar=[];calendar.firstDay=firstDay;calendar.lastDay=lastDay;for(i=0;i<6;i++){calendar[i]=[]}var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;if(startDay>daysInLastMonth)startDay-=7;if(dayOfWeek==this.locale.firstDay)startDay=daysInLastMonth-6;var curDate=moment([lastYear,lastMonth,startDay,12,minute,second]).utcOffset(this.timeZone);var col,row;for(i=0,col=0,row=0;i<42;i++,col++,curDate=moment(curDate).add(24,"hour")){if(i>0&&col%7===0){col=0;row++}calendar[row][col]=curDate.clone().hour(hour);curDate.hour(12);if(this.minDate&&calendar[row][col].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&calendar[row][col].isBefore(this.minDate)&&side=="left"){calendar[row][col]=this.minDate.clone()}if(this.maxDate&&calendar[row][col].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&calendar[row][col].isAfter(this.maxDate)&&side=="right"){calendar[row][col]=this.maxDate.clone()}}return calendar},renderDropdowns:function(selected,minDate,maxDate){var currentMonth=selected.month();var currentYear=selected.year();var maxYear=maxDate&&maxDate.year()||currentYear+5;var minYear=minDate&&minDate.year()||currentYear-50;var monthHtml='<select class="monthselect">';var inMinYear=currentYear==minYear;var inMaxYear=currentYear==maxYear;for(var m=0;m<12;m++){if((!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())){monthHtml+="<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+">"+this.locale.monthNames[m]+"</option>"}}monthHtml+="</select>";var yearHtml='<select class="yearselect">';for(var y=minYear;y<=maxYear;y++){yearHtml+='<option value="'+y+'"'+(y===currentYear?' selected="selected"':"")+">"+y+"</option>"}yearHtml+="</select>";return monthHtml+yearHtml},renderCalendar:function(calendar,selected,minDate,maxDate,side){var html='<div class="calendar-date">';html+='<table class="table-condensed">';html+="<thead>";html+="<tr>";if(this.showWeekNumbers)html+="<th></th>";if(!minDate||minDate.isBefore(calendar.firstDay)){html+='<th class="prev available"><i class="fa fa-arrow-left icon icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>'}else{html+="<th></th>"}var dateHtml=this.locale.monthNames[calendar[1][1].month()]+calendar[1][1].format(" YYYY");if(this.showDropdowns){dateHtml=this.renderDropdowns(calendar[1][1],minDate,maxDate)}html+='<th colspan="5" class="month">'+dateHtml+"</th>";if(!maxDate||maxDate.isAfter(calendar.lastDay)){html+='<th class="next available"><i class="fa fa-arrow-right icon icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>'}else{html+="<th></th>"}html+="</tr>";html+="<tr>";if(this.showWeekNumbers)html+='<th class="week">'+this.locale.weekLabel+"</th>";$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+="<th>"+dayOfWeek+"</th>"});html+="</tr>";html+="</thead>";html+="<tbody>";for(var row=0;row<6;row++){html+="<tr>";if(this.showWeekNumbers)html+='<td class="week">'+calendar[row][0].week()+"</td>";for(var col=0;col<7;col++){var cname="available ";cname+=calendar[row][col].month()==calendar[1][1].month()?"":"off";if(minDate&&calendar[row][col].isBefore(minDate,"day")||maxDate&&calendar[row][col].isAfter(maxDate,"day")){cname=" off disabled "}else if(calendar[row][col].format("YYYY-MM-DD")==selected.format("YYYY-MM-DD")){cname+=" active ";if(calendar[row][col].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")){cname+=" start-date "}if(calendar[row][col].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")){cname+=" end-date "}}else if(calendar[row][col]>=this.startDate&&calendar[row][col]<=this.endDate){cname+=" in-range ";if(calendar[row][col].isSame(this.startDate)){cname+=" start-date "}if(calendar[row][col].isSame(this.endDate)){cname+=" end-date "}}var title="r"+row+"c"+col;html+='<td class="'+cname.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+title+'">'+calendar[row][col].date()+"</td>"}html+="</tr>"}html+="</tbody>";html+="</table>";html+="</div>";var i;if(this.timePicker){html+='<div class="calendar-time">';html+='<select class="hourselect">';var min_hour=0;var max_hour=23;if(minDate&&(side=="left"||this.singleDatePicker)&&selected.format("YYYY-MM-DD")==minDate.format("YYYY-MM-DD")){min_hour=minDate.hour();if(selected.hour()<min_hour)selected.hour(min_hour);if(this.timePicker12Hour&&min_hour>=12&&selected.hour()>=12)min_hour-=12;if(this.timePicker12Hour&&min_hour==12)min_hour=1}if(maxDate&&(side=="right"||this.singleDatePicker)&&selected.format("YYYY-MM-DD")==maxDate.format("YYYY-MM-DD")){max_hour=maxDate.hour();if(selected.hour()>max_hour)selected.hour(max_hour);if(this.timePicker12Hour&&max_hour>=12&&selected.hour()>=12)max_hour-=12}var start=0;var end=23;var selected_hour=selected.hour();if(this.timePicker12Hour){start=1;end=12;if(selected_hour>=12)selected_hour-=12;if(selected_hour===0)selected_hour=12}for(i=start;i<=end;i++){if(i==selected_hour){html+='<option value="'+i+'" selected="selected">'+i+"</option>"}else if(i<min_hour||i>max_hour){html+='<option value="'+i+'" disabled="disabled" class="disabled">'+i+"</option>"}else{html+='<option value="'+i+'">'+i+"</option>"}}html+="</select> : ";html+='<select class="minuteselect">';var min_minute=0;var max_minute=59;if(minDate&&(side=="left"||this.singleDatePicker)&&selected.format("YYYY-MM-DD h A")==minDate.format("YYYY-MM-DD h A")){min_minute=minDate.minute();if(selected.minute()<min_minute)selected.minute(min_minute)}if(maxDate&&(side=="right"||this.singleDatePicker)&&selected.format("YYYY-MM-DD h A")==maxDate.format("YYYY-MM-DD h A")){max_minute=maxDate.minute();if(selected.minute()>max_minute)selected.minute(max_minute)}for(i=0;i<60;i+=this.timePickerIncrement){var num=i;if(num<10)num="0"+num;if(i==selected.minute()){html+='<option value="'+i+'" selected="selected">'+num+"</option>"}else if(i<min_minute||i>max_minute){html+='<option value="'+i+'" disabled="disabled" class="disabled">'+num+"</option>"}else{html+='<option value="'+i+'">'+num+"</option>"}}html+="</select> ";if(this.timePickerSeconds){html+=': <select class="secondselect">';for(i=0;i<60;i+=this.timePickerIncrement){var num=i;if(num<10)num="0"+num;if(i==selected.second()){html+='<option value="'+i+'" selected="selected">'+num+"</option>"}else{html+='<option value="'+i+'">'+num+"</option>"}}html+="</select>"}if(this.timePicker12Hour){html+='<select class="ampmselect">';var am_html="";var pm_html="";if(minDate&&(side=="left"||this.singleDatePicker)&&selected.format("YYYY-MM-DD")==minDate.format("YYYY-MM-DD")&&minDate.hour()>=12){am_html=' disabled="disabled" class="disabled"'}if(maxDate&&(side=="right"||this.singleDatePicker)&&selected.format("YYYY-MM-DD")==maxDate.format("YYYY-MM-DD")&&maxDate.hour()<12){pm_html=' disabled="disabled" class="disabled"'}if(selected.hour()>=12){html+='<option value="AM"'+am_html+'>AM</option><option value="PM" selected="selected"'+pm_html+">PM</option>"}else{html+='<option value="AM" selected="selected"'+am_html+'>AM</option><option value="PM"'+pm_html+">PM</option>"}html+="</select>"}html+="</div>"}return html},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData("daterangepicker")}};$.fn.daterangepicker=function(options,cb){this.each(function(){var el=$(this);if(el.data("daterangepicker"))el.data("daterangepicker").remove();el.data("daterangepicker",new DateRangePicker(el,options,cb))});return this}});(function($,window,document,undefined){"use strict";var Timepicker=function(element,options){this.widget="";this.$element=$(element);this.defaultTime=options.defaultTime;this.disableFocus=options.disableFocus;this.isOpen=options.isOpen;this.minuteStep=options.minuteStep;this.modalBackdrop=options.modalBackdrop;this.secondStep=options.secondStep;this.showInputs=options.showInputs;this.showMeridian=options.showMeridian;this.showSeconds=options.showSeconds;this.template=options.template;this.appendWidgetTo=options.appendWidgetTo;this.upArrowStyle=options.upArrowStyle;this.downArrowStyle=options.downArrowStyle;this.containerClass=options.containerClass;this._init()};Timepicker.prototype={constructor:Timepicker,_init:function(){var self=this;if(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")){if(this.$element.parent(".input-append, .input-prepend").find(".add-on").length){this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":$.proxy(this.showWidget,this)})}else{this.$element.closest(this.containerClass).find(".add-on").on({"click.timepicker":$.proxy(this.showWidget,this)})}this.$element.on({"focus.timepicker":$.proxy(this.highlightUnit,this),"click.timepicker":$.proxy(this.highlightUnit,this),"keydown.timepicker":$.proxy(this.elementKeydown,this),"blur.timepicker":$.proxy(this.blurElement,this)})}else{if(this.template){this.$element.on({"focus.timepicker":$.proxy(this.showWidget,this),"click.timepicker":$.proxy(this.showWidget,this),"blur.timepicker":$.proxy(this.blurElement,this)})}else{this.$element.on({"focus.timepicker":$.proxy(this.highlightUnit,this),"click.timepicker":$.proxy(this.highlightUnit,this),"keydown.timepicker":$.proxy(this.elementKeydown,this),"blur.timepicker":$.proxy(this.blurElement,this)})}}if(this.template!==false){this.$widget=$(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",$.proxy(this.widgetClick,this))}else{this.$widget=false}if(this.showInputs&&this.$widget!==false){this.$widget.find("input").each(function(){$(this).on({"click.timepicker":function(){$(this).select()},"keydown.timepicker":$.proxy(self.widgetKeydown,self)})})}this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=undefined;this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian){if(this.hour===1){this.hour=12}else if(this.hour===12){this.hour--;return this.toggleMeridian()}else if(this.hour===0){this.hour=11;return this.toggleMeridian()}else{this.hour--}}else{if(this.hour===0){this.hour=23}else{this.hour--}}this.update()},decrementMinute:function(step){var newVal;if(step){newVal=this.minute-step}else{newVal=this.minute-this.minuteStep}if(newVal<0){this.decrementHour();this.minute=newVal+60}else{this.minute=newVal}this.update()},decrementSecond:function(){var newVal=this.second-this.secondStep;if(newVal<0){this.decrementMinute(true);this.second=newVal+60}else{this.second=newVal}this.update()},elementKeydown:function(e){switch(e.keyCode){case 9:this.updateFromElementVal();switch(this.highlightedUnit){case"hour":e.preventDefault();this.highlightNextUnit();break;case"minute":if(this.showMeridian||this.showSeconds){e.preventDefault();this.highlightNextUnit()}break;case"second":if(this.showMeridian){e.preventDefault();this.highlightNextUnit()}break}break;case 27:this.updateFromElementVal();break;case 37:e.preventDefault();this.highlightPrevUnit();this.updateFromElementVal();break;case 38:e.preventDefault();switch(this.highlightedUnit){case"hour":this.incrementHour();this.highlightHour();break;case"minute":this.incrementMinute();this.highlightMinute();break;case"second":this.incrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian();break}break;case 39:e.preventDefault();this.updateFromElementVal();this.highlightNextUnit();break;case 40:e.preventDefault();switch(this.highlightedUnit){case"hour":this.decrementHour();this.highlightHour();break;case"minute":this.decrementMinute();this.highlightMinute();break;case"second":this.decrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian();break}break}},formatTime:function(hour,minute,second,meridian){hour=hour<10?"0"+hour:hour;minute=minute<10?"0"+minute:minute;second=second<10?"0"+second:second;return hour+":"+minute+(this.showSeconds?":"+second:"")+(this.showMeridian?" "+meridian:"")},getCursorPosition:function(){var input=this.$element.get(0);if("selectionStart"in input){return input.selectionStart}else if(document.selection){input.focus();var sel=document.selection.createRange(),selLen=document.selection.createRange().text.length;sel.moveStart("character",-input.value.length);return sel.text.length-selLen}},getTemplate:function(){var template,hourTemplate,minuteTemplate,secondTemplate,meridianTemplate,templateContent;if(this.showInputs){hourTemplate='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>';minuteTemplate='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>';secondTemplate='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>';meridianTemplate='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'}else{hourTemplate='<span class="bootstrap-timepicker-hour"></span>';minuteTemplate='<span class="bootstrap-timepicker-minute"></span>';secondTemplate='<span class="bootstrap-timepicker-second"></span>';meridianTemplate='<span class="bootstrap-timepicker-meridian"></span>'}templateContent="<table>"+"<tr>"+'<td><a href="#" data-action="incrementHour"><i class="'+this.upArrowStyle+'"></i></a></td>'+'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="incrementMinute"><i class="'+this.upArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="incrementSecond"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td>'+'<td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+"</tr>"+"<tr>"+"<td>"+hourTemplate+"</td> "+'<td class="separator">:</td>'+"<td>"+minuteTemplate+"</td> "+(this.showSeconds?'<td class="separator">:</td>'+"<td>"+secondTemplate+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td>'+"<td>"+meridianTemplate+"</td>":"")+"</tr>"+"<tr>"+'<td><a href="#" data-action="decrementHour"><i class="'+this.downArrowStyle+'"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" data-action="decrementMinute"><i class="'+this.downArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="decrementSecond"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="toggleMeridian"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+"</tr>"+"</table>";switch(this.template){case"modal":template='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'">'+'<div class="modal-header">'+'<a href="#" class="close" data-dismiss="modal">×</a>'+"<h3>Pick a Time</h3>"+"</div>"+'<div class="modal-content">'+templateContent+"</div>"+'<div class="modal-footer">'+'<a href="#" class="btn btn-primary" data-dismiss="modal">OK</a>'+"</div>"+"</div>";break;case"dropdown":template='<div class="bootstrap-timepicker-widget dropdown-menu">'+templateContent+"</div>";break}return template},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){if(this.isOpen===false){return}if(this.showInputs){this.updateFromWidgetInputs()}this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});if(this.template==="modal"&&this.$widget.modal){this.$widget.modal("hide")}else{this.$widget.removeClass("open")}$(document).off("mousedown.timepicker");this.isOpen=false},highlightUnit:function(){this.position=this.getCursorPosition();if(this.position>=0&&this.position<=2){this.highlightHour()}else if(this.position>=3&&this.position<=5){this.highlightMinute()}else if(this.position>=6&&this.position<=8){if(this.showSeconds){this.highlightSecond()}else{this.highlightMeridian()}}else if(this.position>=9&&this.position<=11){this.highlightMeridian()}},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":if(this.showSeconds){this.highlightSecond()}else if(this.showMeridian){this.highlightMeridian()}else{this.highlightHour()}break;case"second":if(this.showMeridian){this.highlightMeridian()}else{this.highlightHour()}break;case"meridian":this.highlightHour();break}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":if(this.showSeconds){this.highlightSecond()}else{this.highlightMinute()}break}},highlightHour:function(){var $element=this.$element.get(0);this.highlightedUnit="hour";if($element.setSelectionRange){setTimeout(function(){$element.setSelectionRange(0,2)},0)}},highlightMinute:function(){var $element=this.$element.get(0);this.highlightedUnit="minute";if($element.setSelectionRange){setTimeout(function(){$element.setSelectionRange(3,5)},0)}},highlightSecond:function(){var $element=this.$element.get(0);this.highlightedUnit="second";if($element.setSelectionRange){setTimeout(function(){$element.setSelectionRange(6,8)},0)}},highlightMeridian:function(){var $element=this.$element.get(0);this.highlightedUnit="meridian";if($element.setSelectionRange){if(this.showSeconds){setTimeout(function(){$element.setSelectionRange(9,11)},0)}else{setTimeout(function(){$element.setSelectionRange(6,8)},0)}}},incrementHour:function(){if(this.showMeridian){if(this.hour===11){this.hour++;return this.toggleMeridian()}else if(this.hour===12){this.hour=0}}if(this.hour===23){this.hour=0;return}this.hour++;this.update()},incrementMinute:function(step){var newVal;if(step){newVal=this.minute+step}else{newVal=this.minute+this.minuteStep-this.minute%this.minuteStep}if(newVal>59){this.incrementHour();this.minute=newVal-60}else{this.minute=newVal}this.update()},incrementSecond:function(){var newVal=this.second+this.secondStep-this.second%this.secondStep;if(newVal>59){this.incrementMinute(true);this.second=newVal-60}else{this.second=newVal}this.update()},remove:function(){$("document").off(".timepicker");if(this.$widget){this.$widget.remove()}delete this.$element.data().timepicker},setDefaultTime:function(defaultTime){if(!this.$element.val()){if(defaultTime==="current"){var dTime=new Date,hours=dTime.getHours(),minutes=Math.floor(dTime.getMinutes()/this.minuteStep)*this.minuteStep,seconds=Math.floor(dTime.getSeconds()/this.secondStep)*this.secondStep,meridian="AM";if(this.showMeridian){if(hours===0){hours=12}else if(hours>=12){if(hours>12){hours=hours-12}meridian="PM"}else{meridian="AM"}}this.hour=hours;this.minute=minutes;this.second=seconds;this.meridian=meridian;this.update()}else if(defaultTime===false){this.hour=0;this.minute=0;this.second=0;this.meridian="AM"}else{this.setTime(defaultTime)}}else{this.updateFromElementVal()}},setTime:function(time){var arr,timeArray;if(this.showMeridian){arr=time.split(" ");timeArray=arr[0].split(":");this.meridian=arr[1]}else{timeArray=time.split(":")}this.hour=parseInt(timeArray[0],10);this.minute=parseInt(timeArray[1],10);this.second=parseInt(timeArray[2],10);if(isNaN(this.hour)){this.hour=0}if(isNaN(this.minute)){this.minute=0}if(this.showMeridian){if(this.hour>12){this.hour=12}else if(this.hour<1){this.hour=12}if(this.meridian==="am"||this.meridian==="a"){this.meridian="AM"}else if(this.meridian==="pm"||this.meridian==="p"){this.meridian="PM"}if(this.meridian!=="AM"&&this.meridian!=="PM"){this.meridian="AM"}}else{if(this.hour>=24){this.hour=23}else if(this.hour<0){this.hour=0}}if(this.minute<0){this.minute=0}else if(this.minute>=60){this.minute=59}if(this.showSeconds){if(isNaN(this.second)){this.second=0}else if(this.second<0){this.second=0}else if(this.second>=60){this.second=59}}this.update()},showWidget:function(){if(this.isOpen){return}if(this.$element.is(":disabled")){return}var self=this;$(document).on("mousedown.timepicker",function(e){if($(e.target).closest(".bootstrap-timepicker-widget").length===0){self.hideWidget()}});this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});if(this.disableFocus){this.$element.blur()}this.updateFromElementVal();if(this.template==="modal"&&this.$widget.modal){this.$widget.modal("show").on("hidden",$.proxy(this.hideWidget,this))}else{if(this.isOpen===false){this.$widget.addClass("open")}}this.isOpen=true},toggleMeridian:function(){this.meridian=this.meridian==="AM"?"PM":"AM";this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.updateElement();this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var val=this.$element.val();if(val){this.setTime(val)}},updateWidget:function(){if(this.$widget===false){return}var hour=this.hour<10?"0"+this.hour:this.hour,minute=this.minute<10?"0"+this.minute:this.minute,second=this.second<10?"0"+this.second:this.second;if(this.showInputs){this.$widget.find("input.bootstrap-timepicker-hour").val(hour);this.$widget.find("input.bootstrap-timepicker-minute").val(minute);if(this.showSeconds){this.$widget.find("input.bootstrap-timepicker-second").val(second)}if(this.showMeridian){this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)}}else{this.$widget.find("span.bootstrap-timepicker-hour").text(hour);this.$widget.find("span.bootstrap-timepicker-minute").text(minute);if(this.showSeconds){this.$widget.find("span.bootstrap-timepicker-second").text(second)}if(this.showMeridian){this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian)}}},updateFromWidgetInputs:function(){if(this.$widget===false){return}var time=$("input.bootstrap-timepicker-hour",this.$widget).val()+":"+$("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+$("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+$("input.bootstrap-timepicker-meridian",this.$widget).val():"");
this.setTime(time)},widgetClick:function(e){e.stopPropagation();e.preventDefault();var action=$(e.target).closest("a").data("action");if(action){this[action]()}},widgetKeydown:function(e){var $input=$(e.target).closest("input"),name=$input.attr("name");switch(e.keyCode){case 9:if(this.showMeridian){if(name==="meridian"){return this.hideWidget()}}else{if(this.showSeconds){if(name==="second"){return this.hideWidget()}}else{if(name==="minute"){return this.hideWidget()}}}this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:e.preventDefault();switch(name){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian();break}break;case 40:e.preventDefault();switch(name){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian();break}break}}};$.fn.timepicker=function(option){var args=Array.apply(null,arguments);args.shift();return this.each(function(){var $this=$(this),data=$this.data("timepicker"),options=typeof option==="object"&&option;if(!data){$this.data("timepicker",data=new Timepicker(this,$.extend({},$.fn.timepicker.defaults,options,$(this).data())))}if(typeof option==="string"){data[option].apply(data,args)}})};$.fn.timepicker.defaults={defaultTime:"current",disableFocus:false,isOpen:false,minuteStep:15,modalBackdrop:false,secondStep:15,showSeconds:false,showInputs:true,showMeridian:true,template:"dropdown",appendWidgetTo:".bootstrap-timepicker",upArrowStyle:"glyphicon glyphicon-chevron-up",downArrowStyle:"glyphicon glyphicon-chevron-down",containerClass:"bootstrap-timepicker"};$.fn.timepicker.Constructor=Timepicker})(jQuery,window,document);(function($){if($.fn.inputmask===undefined){function isInputEventSupported(eventName){var el=document.createElement("input"),eventName="on"+eventName,isSupported=eventName in el;if(!isSupported){el.setAttribute(eventName,"return;");isSupported=typeof el[eventName]=="function"}el=null;return isSupported}function resolveAlias(aliasStr,options,opts){var aliasDefinition=opts.aliases[aliasStr];if(aliasDefinition){if(aliasDefinition.alias)resolveAlias(aliasDefinition.alias,undefined,opts);$.extend(true,opts,aliasDefinition);$.extend(true,opts,options);return true}return false}function generateMaskSets(opts){var ms=[];var genmasks=[];function getMaskTemplate(mask){if(opts.numericInput){mask=mask.split("").reverse().join("")}var escaped=false,outCount=0,greedy=opts.greedy,repeat=opts.repeat;if(repeat=="*")greedy=false;if(mask.length==1&&greedy==false&&repeat!=0){opts.placeholder=""}var singleMask=$.map(mask.split(""),function(element,index){var outElem=[];if(element==opts.escapeChar){escaped=true}else if(element!=opts.optionalmarker.start&&element!=opts.optionalmarker.end||escaped){var maskdef=opts.definitions[element];if(maskdef&&!escaped){for(var i=0;i<maskdef.cardinality;i++){outElem.push(opts.placeholder.charAt((outCount+i)%opts.placeholder.length))}}else{outElem.push(element);escaped=false}outCount+=outElem.length;return outElem}});var repeatedMask=singleMask.slice();for(var i=1;i<repeat&&greedy;i++){repeatedMask=repeatedMask.concat(singleMask.slice())}return{mask:repeatedMask,repeat:repeat,greedy:greedy}}function getTestingChain(mask){if(opts.numericInput){mask=mask.split("").reverse().join("")}var isOptional=false,escaped=false;var newBlockMarker=false;return $.map(mask.split(""),function(element,index){var outElem=[];if(element==opts.escapeChar){escaped=true}else if(element==opts.optionalmarker.start&&!escaped){isOptional=true;newBlockMarker=true}else if(element==opts.optionalmarker.end&&!escaped){isOptional=false;newBlockMarker=true}else{var maskdef=opts.definitions[element];if(maskdef&&!escaped){var prevalidators=maskdef["prevalidator"],prevalidatorsL=prevalidators?prevalidators.length:0;for(var i=1;i<maskdef.cardinality;i++){var prevalidator=prevalidatorsL>=i?prevalidators[i-1]:[],validator=prevalidator["validator"],cardinality=prevalidator["cardinality"];outElem.push({fn:validator?typeof validator=="string"?new RegExp(validator):new function(){this.test=validator}:new RegExp("."),cardinality:cardinality?cardinality:1,optionality:isOptional,newBlockMarker:isOptional==true?newBlockMarker:false,offset:0,casing:maskdef["casing"],def:maskdef["definitionSymbol"]||element});if(isOptional==true)newBlockMarker=false}outElem.push({fn:maskdef.validator?typeof maskdef.validator=="string"?new RegExp(maskdef.validator):new function(){this.test=maskdef.validator}:new RegExp("."),cardinality:maskdef.cardinality,optionality:isOptional,newBlockMarker:newBlockMarker,offset:0,casing:maskdef["casing"],def:maskdef["definitionSymbol"]||element})}else{outElem.push({fn:null,cardinality:0,optionality:isOptional,newBlockMarker:newBlockMarker,offset:0,casing:null,def:element});escaped=false}newBlockMarker=false;return outElem}})}function markOptional(maskPart){return opts.optionalmarker.start+maskPart+opts.optionalmarker.end}function splitFirstOptionalEndPart(maskPart){var optionalStartMarkers=0,optionalEndMarkers=0,mpl=maskPart.length;for(var i=0;i<mpl;i++){if(maskPart.charAt(i)==opts.optionalmarker.start){optionalStartMarkers++}if(maskPart.charAt(i)==opts.optionalmarker.end){optionalEndMarkers++}if(optionalStartMarkers>0&&optionalStartMarkers==optionalEndMarkers)break}var maskParts=[maskPart.substring(0,i)];if(i<mpl){maskParts.push(maskPart.substring(i+1,mpl))}return maskParts}function splitFirstOptionalStartPart(maskPart){var mpl=maskPart.length;for(var i=0;i<mpl;i++){if(maskPart.charAt(i)==opts.optionalmarker.start){break}}var maskParts=[maskPart.substring(0,i)];if(i<mpl){maskParts.push(maskPart.substring(i+1,mpl))}return maskParts}function generateMask(maskPrefix,maskPart,metadata){var maskParts=splitFirstOptionalEndPart(maskPart);var newMask,maskTemplate;var masks=splitFirstOptionalStartPart(maskParts[0]);if(masks.length>1){newMask=maskPrefix+masks[0]+markOptional(masks[1])+(maskParts.length>1?maskParts[1]:"");if($.inArray(newMask,genmasks)==-1&&newMask!=""){genmasks.push(newMask);maskTemplate=getMaskTemplate(newMask);ms.push({mask:newMask,_buffer:maskTemplate["mask"],buffer:maskTemplate["mask"].slice(),tests:getTestingChain(newMask),lastValidPosition:-1,greedy:maskTemplate["greedy"],repeat:maskTemplate["repeat"],metadata:metadata})}newMask=maskPrefix+masks[0]+(maskParts.length>1?maskParts[1]:"");if($.inArray(newMask,genmasks)==-1&&newMask!=""){genmasks.push(newMask);maskTemplate=getMaskTemplate(newMask);ms.push({mask:newMask,_buffer:maskTemplate["mask"],buffer:maskTemplate["mask"].slice(),tests:getTestingChain(newMask),lastValidPosition:-1,greedy:maskTemplate["greedy"],repeat:maskTemplate["repeat"],metadata:metadata})}if(splitFirstOptionalStartPart(masks[1]).length>1){generateMask(maskPrefix+masks[0],masks[1]+maskParts[1],metadata)}if(maskParts.length>1&&splitFirstOptionalStartPart(maskParts[1]).length>1){generateMask(maskPrefix+masks[0]+markOptional(masks[1]),maskParts[1],metadata);generateMask(maskPrefix+masks[0],maskParts[1],metadata)}}else{newMask=maskPrefix+maskParts;if($.inArray(newMask,genmasks)==-1&&newMask!=""){genmasks.push(newMask);maskTemplate=getMaskTemplate(newMask);ms.push({mask:newMask,_buffer:maskTemplate["mask"],buffer:maskTemplate["mask"].slice(),tests:getTestingChain(newMask),lastValidPosition:-1,greedy:maskTemplate["greedy"],repeat:maskTemplate["repeat"],metadata:metadata})}}}if($.isFunction(opts.mask)){opts.mask=opts.mask.call(this,opts)}if($.isArray(opts.mask)){$.each(opts.mask,function(ndx,msk){if(msk["mask"]!=undefined){generateMask("",msk["mask"].toString(),msk)}else generateMask("",msk.toString())})}else generateMask("",opts.mask.toString());return opts.greedy?ms:ms.sort(function(a,b){return a["mask"].length-b["mask"].length})}var msie10=navigator.userAgent.match(new RegExp("msie 10","i"))!==null,iphone=navigator.userAgent.match(new RegExp("iphone","i"))!==null,android=navigator.userAgent.match(new RegExp("android.*safari.*","i"))!==null,androidchrome=navigator.userAgent.match(new RegExp("android.*chrome.*","i"))!==null,pasteEvent=isInputEventSupported("paste")?"paste":isInputEventSupported("input")?"input":"propertychange";function maskScope(masksets,activeMasksetIndex,opts,actionObj){var isRTL=false,valueOnFocus=getActiveBuffer().join(""),$el,chromeValueOnInput,skipKeyPressEvent=false,skipInputEvent=false,ignorable=false;function getActiveMaskSet(){return masksets[activeMasksetIndex]}function getActiveTests(){return getActiveMaskSet()["tests"]}function getActiveBufferTemplate(){return getActiveMaskSet()["_buffer"]}function getActiveBuffer(){return getActiveMaskSet()["buffer"]}function isValid(pos,c,strict){strict=strict===true;function _isValid(position,activeMaskset,c,strict){var testPos=determineTestPosition(position),loopend=c?1:0,chrs="",buffer=activeMaskset["buffer"];for(var i=activeMaskset["tests"][testPos].cardinality;i>loopend;i--){chrs+=getBufferElement(buffer,testPos-(i-1))}if(c){chrs+=c}return activeMaskset["tests"][testPos].fn!=null?activeMaskset["tests"][testPos].fn.test(chrs,buffer,position,strict,opts):c==getBufferElement(activeMaskset["_buffer"],position,true)||c==opts.skipOptionalPartCharacter?{refresh:true,c:getBufferElement(activeMaskset["_buffer"],position,true),pos:position}:false}function PostProcessResults(maskForwards,results){var hasValidActual=false;$.each(results,function(ndx,rslt){hasValidActual=$.inArray(rslt["activeMasksetIndex"],maskForwards)==-1&&rslt["result"]!==false;if(hasValidActual)return false});if(hasValidActual){results=$.map(results,function(rslt,ndx){if($.inArray(rslt["activeMasksetIndex"],maskForwards)==-1){return rslt}else{masksets[rslt["activeMasksetIndex"]]["lastValidPosition"]=actualLVP}})}else{var lowestPos=-1,lowestIndex=-1,rsltValid;$.each(results,function(ndx,rslt){if($.inArray(rslt["activeMasksetIndex"],maskForwards)!=-1&&rslt["result"]!==false&(lowestPos==-1||lowestPos>rslt["result"]["pos"])){lowestPos=rslt["result"]["pos"];lowestIndex=rslt["activeMasksetIndex"]}});results=$.map(results,function(rslt,ndx){if($.inArray(rslt["activeMasksetIndex"],maskForwards)!=-1){if(rslt["result"]["pos"]==lowestPos){return rslt}else if(rslt["result"]!==false){for(var i=pos;i<lowestPos;i++){rsltValid=_isValid(i,masksets[rslt["activeMasksetIndex"]],masksets[lowestIndex]["buffer"][i],true);if(rsltValid===false){masksets[rslt["activeMasksetIndex"]]["lastValidPosition"]=lowestPos-1;break}else{setBufferElement(masksets[rslt["activeMasksetIndex"]]["buffer"],i,masksets[lowestIndex]["buffer"][i],true);masksets[rslt["activeMasksetIndex"]]["lastValidPosition"]=i}}rsltValid=_isValid(lowestPos,masksets[rslt["activeMasksetIndex"]],c,true);if(rsltValid!==false){setBufferElement(masksets[rslt["activeMasksetIndex"]]["buffer"],lowestPos,c,true);masksets[rslt["activeMasksetIndex"]]["lastValidPosition"]=lowestPos}return rslt}}})}return results}if(strict){var result=_isValid(pos,getActiveMaskSet(),c,strict);if(result===true){result={pos:pos}}return result}var results=[],result=false,currentActiveMasksetIndex=activeMasksetIndex,actualBuffer=getActiveBuffer().slice(),actualLVP=getActiveMaskSet()["lastValidPosition"],actualPrevious=seekPrevious(pos),maskForwards=[];$.each(masksets,function(index,value){if(typeof value=="object"){activeMasksetIndex=index;var maskPos=pos;var lvp=getActiveMaskSet()["lastValidPosition"],rsltValid;if(lvp==actualLVP){if(maskPos-actualLVP>1){for(var i=lvp==-1?0:lvp;i<maskPos;i++){rsltValid=_isValid(i,getActiveMaskSet(),actualBuffer[i],true);if(rsltValid===false){break}else{setBufferElement(getActiveBuffer(),i,actualBuffer[i],true);if(rsltValid===true){rsltValid={pos:i}}var newValidPosition=rsltValid.pos||i;if(getActiveMaskSet()["lastValidPosition"]<newValidPosition)getActiveMaskSet()["lastValidPosition"]=newValidPosition}}}if(!isMask(maskPos)&&!_isValid(maskPos,getActiveMaskSet(),c,strict)){var maxForward=seekNext(maskPos)-maskPos;for(var fw=0;fw<maxForward;fw++){if(_isValid(++maskPos,getActiveMaskSet(),c,strict)!==false)break}maskForwards.push(activeMasksetIndex)}}if(getActiveMaskSet()["lastValidPosition"]>=actualLVP||activeMasksetIndex==currentActiveMasksetIndex){if(maskPos>=0&&maskPos<getMaskLength()){result=_isValid(maskPos,getActiveMaskSet(),c,strict);if(result!==false){if(result===true){result={pos:maskPos}}var newValidPosition=result.pos||maskPos;if(getActiveMaskSet()["lastValidPosition"]<newValidPosition)getActiveMaskSet()["lastValidPosition"]=newValidPosition}results.push({activeMasksetIndex:index,result:result})}}}});activeMasksetIndex=currentActiveMasksetIndex;return PostProcessResults(maskForwards,results)}function determineActiveMasksetIndex(){var currentMasksetIndex=activeMasksetIndex,highestValid={activeMasksetIndex:0,lastValidPosition:-1,next:-1};$.each(masksets,function(index,value){if(typeof value=="object"){activeMasksetIndex=index;if(getActiveMaskSet()["lastValidPosition"]>highestValid["lastValidPosition"]){highestValid["activeMasksetIndex"]=index;highestValid["lastValidPosition"]=getActiveMaskSet()["lastValidPosition"];highestValid["next"]=seekNext(getActiveMaskSet()["lastValidPosition"])}else if(getActiveMaskSet()["lastValidPosition"]==highestValid["lastValidPosition"]&&(highestValid["next"]==-1||highestValid["next"]>seekNext(getActiveMaskSet()["lastValidPosition"]))){highestValid["activeMasksetIndex"]=index;highestValid["lastValidPosition"]=getActiveMaskSet()["lastValidPosition"];highestValid["next"]=seekNext(getActiveMaskSet()["lastValidPosition"])}}});activeMasksetIndex=highestValid["lastValidPosition"]!=-1&&masksets[currentMasksetIndex]["lastValidPosition"]==highestValid["lastValidPosition"]?currentMasksetIndex:highestValid["activeMasksetIndex"];if(currentMasksetIndex!=activeMasksetIndex){clearBuffer(getActiveBuffer(),seekNext(highestValid["lastValidPosition"]),getMaskLength());getActiveMaskSet()["writeOutBuffer"]=true}$el.data("_inputmask")["activeMasksetIndex"]=activeMasksetIndex}function isMask(pos){var testPos=determineTestPosition(pos);var test=getActiveTests()[testPos];return test!=undefined?test.fn:false}function determineTestPosition(pos){return pos%getActiveTests().length}function getMaskLength(){return opts.getMaskLength(getActiveBufferTemplate(),getActiveMaskSet()["greedy"],getActiveMaskSet()["repeat"],getActiveBuffer(),opts)}function seekNext(pos){var maskL=getMaskLength();if(pos>=maskL)return maskL;var position=pos;while(++position<maskL&&!isMask(position)){}return position}function seekPrevious(pos){var position=pos;if(position<=0)return 0;while(--position>0&&!isMask(position)){}return position}function setBufferElement(buffer,position,element,autoPrepare){if(autoPrepare)position=prepareBuffer(buffer,position);var test=getActiveTests()[determineTestPosition(position)];var elem=element;if(elem!=undefined&&test!=undefined){switch(test.casing){case"upper":elem=element.toUpperCase();break;case"lower":elem=element.toLowerCase();break}}buffer[position]=elem}function getBufferElement(buffer,position,autoPrepare){if(autoPrepare)position=prepareBuffer(buffer,position);return buffer[position]}function prepareBuffer(buffer,position){var j;while(buffer[position]==undefined&&buffer.length<getMaskLength()){j=0;while(getActiveBufferTemplate()[j]!==undefined){buffer.push(getActiveBufferTemplate()[j++])}}return position}function writeBuffer(input,buffer,caretPos){input._valueSet(buffer.join(""));if(caretPos!=undefined){caret(input,caretPos)}}function clearBuffer(buffer,start,end,stripNomasks){for(var i=start,maskL=getMaskLength();i<end&&i<maskL;i++){if(stripNomasks===true){if(!isMask(i))setBufferElement(buffer,i,"")}else setBufferElement(buffer,i,getBufferElement(getActiveBufferTemplate().slice(),i,true))}}function setReTargetPlaceHolder(buffer,pos){var testPos=determineTestPosition(pos);setBufferElement(buffer,pos,getBufferElement(getActiveBufferTemplate(),testPos))}function getPlaceHolder(pos){return opts.placeholder.charAt(pos%opts.placeholder.length)}function checkVal(input,writeOut,strict,nptvl,intelliCheck){var inputValue=nptvl!=undefined?nptvl.slice():truncateInput(input._valueGet()).split("");$.each(masksets,function(ndx,ms){if(typeof ms=="object"){ms["buffer"]=ms["_buffer"].slice();ms["lastValidPosition"]=-1;ms["p"]=-1}});if(strict!==true)activeMasksetIndex=0;if(writeOut)input._valueSet("");var ml=getMaskLength();$.each(inputValue,function(ndx,charCode){if(intelliCheck===true){var p=getActiveMaskSet()["p"],lvp=p==-1?p:seekPrevious(p),pos=lvp==-1?ndx:seekNext(lvp);if($.inArray(charCode,getActiveBufferTemplate().slice(lvp+1,pos))==-1){keypressEvent.call(input,undefined,true,charCode.charCodeAt(0),writeOut,strict,ndx)}}else{keypressEvent.call(input,undefined,true,charCode.charCodeAt(0),writeOut,strict,ndx)}});if(strict===true&&getActiveMaskSet()["p"]!=-1){getActiveMaskSet()["lastValidPosition"]=seekPrevious(getActiveMaskSet()["p"])}}function escapeRegex(str){return $.inputmask.escapeRegex.call(this,str)}function truncateInput(inputValue){return inputValue.replace(new RegExp("("+escapeRegex(getActiveBufferTemplate().join(""))+")*$"),"")}function clearOptionalTail(input){var buffer=getActiveBuffer(),tmpBuffer=buffer.slice(),testPos,pos;for(var pos=tmpBuffer.length-1;pos>=0;pos--){var testPos=determineTestPosition(pos);if(getActiveTests()[testPos].optionality){if(!isMask(pos)||!isValid(pos,buffer[pos],true))tmpBuffer.pop();else break}else break}writeBuffer(input,tmpBuffer)}function unmaskedvalue($input,skipDatepickerCheck){if(getActiveTests()&&(skipDatepickerCheck===true||!$input.hasClass("hasDatepicker"))){var umValue=$.map(getActiveBuffer(),function(element,index){return isMask(index)&&isValid(index,element,true)?element:null});var unmaskedValue=(isRTL?umValue.reverse():umValue).join("");return opts.onUnMask!=undefined?opts.onUnMask.call(this,getActiveBuffer().join(""),unmaskedValue):unmaskedValue}else{return $input[0]._valueGet()}}function TranslatePosition(pos){if(isRTL&&typeof pos=="number"&&(!opts.greedy||opts.placeholder!="")){var bffrLght=getActiveBuffer().length;pos=bffrLght-pos}return pos}function caret(input,begin,end){var npt=input.jquery&&input.length>0?input[0]:input,range;if(typeof begin=="number"){begin=TranslatePosition(begin);end=TranslatePosition(end);if(!$(input).is(":visible")){return}end=typeof end=="number"?end:begin;npt.scrollLeft=npt.scrollWidth;if(opts.insertMode==false&&begin==end)end++;if(npt.setSelectionRange){npt.selectionStart=begin;npt.selectionEnd=android?begin:end}else if(npt.createTextRange){range=npt.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",begin);range.select()}}else{if(!$(input).is(":visible")){return{begin:0,end:0}}if(npt.setSelectionRange){begin=npt.selectionStart;end=npt.selectionEnd}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-1e5);end=begin+range.text.length}begin=TranslatePosition(begin);end=TranslatePosition(end);return{begin:begin,end:end}}}function isComplete(buffer){if(opts.repeat=="*")return undefined;var complete=false,highestValidPosition=0,currentActiveMasksetIndex=activeMasksetIndex;$.each(masksets,function(ndx,ms){if(typeof ms=="object"){activeMasksetIndex=ndx;var aml=seekPrevious(getMaskLength());if(ms["lastValidPosition"]>=highestValidPosition&&ms["lastValidPosition"]==aml){var msComplete=true;for(var i=0;i<=aml;i++){var mask=isMask(i),testPos=determineTestPosition(i);if(mask&&(buffer[i]==undefined||buffer[i]==getPlaceHolder(i))||!mask&&buffer[i]!=getActiveBufferTemplate()[testPos]){msComplete=false;break}}complete=complete||msComplete;if(complete)return false}highestValidPosition=ms["lastValidPosition"]}});activeMasksetIndex=currentActiveMasksetIndex;return complete}function isSelection(begin,end){return isRTL?begin-end>1||begin-end==1&&opts.insertMode:end-begin>1||end-begin==1&&opts.insertMode}function installEventRuler(npt){var events=$._data(npt).events;$.each(events,function(eventType,eventHandlers){$.each(eventHandlers,function(ndx,eventHandler){if(eventHandler.namespace=="inputmask"){if(eventHandler.type!="setvalue"){var handler=eventHandler.handler;eventHandler.handler=function(e){if(this.readOnly||this.disabled)e.preventDefault;else return handler.apply(this,arguments)}}}})})}function patchValueProperty(npt){var valueProperty;if(Object.getOwnPropertyDescriptor)valueProperty=Object.getOwnPropertyDescriptor(npt,"value");if(valueProperty&&valueProperty.get){if(!npt._valueGet){var valueGet=valueProperty.get;var valueSet=valueProperty.set;npt._valueGet=function(){return isRTL?valueGet.call(this).split("").reverse().join(""):valueGet.call(this)};npt._valueSet=function(value){valueSet.call(this,isRTL?value.split("").reverse().join(""):value)};Object.defineProperty(npt,"value",{get:function(){var $self=$(this),inputData=$(this).data("_inputmask"),masksets=inputData["masksets"],activeMasksetIndex=inputData["activeMasksetIndex"];return inputData&&inputData["opts"].autoUnmask?$self.inputmask("unmaskedvalue"):valueGet.call(this)!=masksets[activeMasksetIndex]["_buffer"].join("")?valueGet.call(this):""},set:function(value){valueSet.call(this,value);$(this).triggerHandler("setvalue.inputmask")}})}}else if(document.__lookupGetter__&&npt.__lookupGetter__("value")){if(!npt._valueGet){var valueGet=npt.__lookupGetter__("value");var valueSet=npt.__lookupSetter__("value");npt._valueGet=function(){return isRTL?valueGet.call(this).split("").reverse().join(""):valueGet.call(this)};npt._valueSet=function(value){valueSet.call(this,isRTL?value.split("").reverse().join(""):value)};npt.__defineGetter__("value",function(){var $self=$(this),inputData=$(this).data("_inputmask"),masksets=inputData["masksets"],activeMasksetIndex=inputData["activeMasksetIndex"];return inputData&&inputData["opts"].autoUnmask?$self.inputmask("unmaskedvalue"):valueGet.call(this)!=masksets[activeMasksetIndex]["_buffer"].join("")?valueGet.call(this):""});npt.__defineSetter__("value",function(value){valueSet.call(this,value);$(this).triggerHandler("setvalue.inputmask")})}}else{if(!npt._valueGet){npt._valueGet=function(){return isRTL?this.value.split("").reverse().join(""):this.value};npt._valueSet=function(value){this.value=isRTL?value.split("").reverse().join(""):value}}if($.valHooks.text==undefined||$.valHooks.text.inputmaskpatch!=true){var valueGet=$.valHooks.text&&$.valHooks.text.get?$.valHooks.text.get:function(elem){return elem.value};var valueSet=$.valHooks.text&&$.valHooks.text.set?$.valHooks.text.set:function(elem,value){elem.value=value;return elem};jQuery.extend($.valHooks,{text:{get:function(elem){var $elem=$(elem);if($elem.data("_inputmask")){if($elem.data("_inputmask")["opts"].autoUnmask)return $elem.inputmask("unmaskedvalue");else{var result=valueGet(elem),inputData=$elem.data("_inputmask"),masksets=inputData["masksets"],activeMasksetIndex=inputData["activeMasksetIndex"];return result!=masksets[activeMasksetIndex]["_buffer"].join("")?result:""}}else return valueGet(elem)},set:function(elem,value){var $elem=$(elem);var result=valueSet(elem,value);if($elem.data("_inputmask"))$elem.triggerHandler("setvalue.inputmask");return result},inputmaskpatch:true}})}}}function shiftL(start,end,c,maskJumps){var buffer=getActiveBuffer();if(maskJumps!==false)while(!isMask(start)&&start-1>=0)start--;for(var i=start;i<end&&i<getMaskLength();i++){if(isMask(i)){setReTargetPlaceHolder(buffer,i);var j=seekNext(i);var p=getBufferElement(buffer,j);if(p!=getPlaceHolder(j)){if(j<getMaskLength()&&isValid(i,p,true)!==false&&getActiveTests()[determineTestPosition(i)].def==getActiveTests()[determineTestPosition(j)].def){setBufferElement(buffer,i,p,true)}else{if(isMask(i))break}}}else{setReTargetPlaceHolder(buffer,i)}}if(c!=undefined)setBufferElement(buffer,seekPrevious(end),c);if(getActiveMaskSet()["greedy"]==false){var trbuffer=truncateInput(buffer.join("")).split("");buffer.length=trbuffer.length;for(var i=0,bl=buffer.length;i<bl;i++){buffer[i]=trbuffer[i]}if(buffer.length==0)getActiveMaskSet()["buffer"]=getActiveBufferTemplate().slice()}return start}function shiftR(start,end,c){var buffer=getActiveBuffer();if(getBufferElement(buffer,start,true)!=getPlaceHolder(start)){for(var i=seekPrevious(end);i>start&&i>=0;i--){if(isMask(i)){var j=seekPrevious(i);var t=getBufferElement(buffer,j);if(t!=getPlaceHolder(j)){if(isValid(j,t,true)!==false&&getActiveTests()[determineTestPosition(i)].def==getActiveTests()[determineTestPosition(j)].def){setBufferElement(buffer,i,t,true);setReTargetPlaceHolder(buffer,j)}}}else setReTargetPlaceHolder(buffer,i)}}if(c!=undefined&&getBufferElement(buffer,start)==getPlaceHolder(start))setBufferElement(buffer,start,c);var lengthBefore=buffer.length;if(getActiveMaskSet()["greedy"]==false){var trbuffer=truncateInput(buffer.join("")).split("");buffer.length=trbuffer.length;for(var i=0,bl=buffer.length;i<bl;i++){buffer[i]=trbuffer[i]}if(buffer.length==0)getActiveMaskSet()["buffer"]=getActiveBufferTemplate().slice()}return end-(lengthBefore-buffer.length)}function HandleRemove(input,k,pos){if(opts.numericInput||isRTL){switch(k){case opts.keyCode.BACKSPACE:k=opts.keyCode.DELETE;break;case opts.keyCode.DELETE:k=opts.keyCode.BACKSPACE;break}if(isRTL){var pend=pos.end;pos.end=pos.begin;pos.begin=pend}}var isSelection=true;if(pos.begin==pos.end){var posBegin=k==opts.keyCode.BACKSPACE?pos.begin-1:pos.begin;if(opts.isNumeric&&opts.radixPoint!=""&&getActiveBuffer()[posBegin]==opts.radixPoint){pos.begin=getActiveBuffer().length-1==posBegin?pos.begin:k==opts.keyCode.BACKSPACE?posBegin:seekNext(posBegin);pos.end=pos.begin}isSelection=false;if(k==opts.keyCode.BACKSPACE)pos.begin--;else if(k==opts.keyCode.DELETE)pos.end++}else if(pos.end-pos.begin==1&&!opts.insertMode){isSelection=false;if(k==opts.keyCode.BACKSPACE)pos.begin--}clearBuffer(getActiveBuffer(),pos.begin,pos.end);var ml=getMaskLength();if(opts.greedy==false){shiftL(pos.begin,ml,undefined,!isRTL&&(k==opts.keyCode.BACKSPACE&&!isSelection))}else{var newpos=pos.begin;for(var i=pos.begin;i<pos.end;i++){if(isMask(i)||!isSelection)newpos=shiftL(pos.begin,ml,undefined,!isRTL&&(k==opts.keyCode.BACKSPACE&&!isSelection))}if(!isSelection)pos.begin=newpos}var firstMaskPos=seekNext(-1);clearBuffer(getActiveBuffer(),pos.begin,pos.end,true);checkVal(input,false,masksets[1]==undefined||firstMaskPos>=pos.end,getActiveBuffer());if(getActiveMaskSet()["lastValidPosition"]<firstMaskPos){getActiveMaskSet()["lastValidPosition"]=-1;getActiveMaskSet()["p"]=firstMaskPos}else{getActiveMaskSet()["p"]=pos.begin}}function keydownEvent(e){skipKeyPressEvent=false;var input=this,$input=$(input),k=e.keyCode,pos=caret(input);if(k==opts.keyCode.BACKSPACE||k==opts.keyCode.DELETE||iphone&&k==127||e.ctrlKey&&k==88){e.preventDefault();if(k==88)valueOnFocus=getActiveBuffer().join("");HandleRemove(input,k,pos);determineActiveMasksetIndex();writeBuffer(input,getActiveBuffer(),getActiveMaskSet()["p"]);if(input._valueGet()==getActiveBufferTemplate().join(""))$input.trigger("cleared");if(opts.showTooltip){$input.prop("title",getActiveMaskSet()["mask"])}}else if(k==opts.keyCode.END||k==opts.keyCode.PAGE_DOWN){setTimeout(function(){var caretPos=seekNext(getActiveMaskSet()["lastValidPosition"]);if(!opts.insertMode&&caretPos==getMaskLength()&&!e.shiftKey)caretPos--;caret(input,e.shiftKey?pos.begin:caretPos,caretPos)},0)}else if(k==opts.keyCode.HOME&&!e.shiftKey||k==opts.keyCode.PAGE_UP){caret(input,0,e.shiftKey?pos.begin:0)}else if(k==opts.keyCode.ESCAPE||k==90&&e.ctrlKey){checkVal(input,true,false,valueOnFocus.split(""));$input.click()}else if(k==opts.keyCode.INSERT&&!(e.shiftKey||e.ctrlKey)){opts.insertMode=!opts.insertMode;caret(input,!opts.insertMode&&pos.begin==getMaskLength()?pos.begin-1:pos.begin)}else if(opts.insertMode==false&&!e.shiftKey){if(k==opts.keyCode.RIGHT){setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin)},0)}else if(k==opts.keyCode.LEFT){setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin-1)},0)}}var currentCaretPos=caret(input);if(opts.onKeyDown.call(this,e,getActiveBuffer(),opts)===true)caret(input,currentCaretPos.begin,currentCaretPos.end);ignorable=$.inArray(k,opts.ignorables)!=-1}function keypressEvent(e,checkval,k,writeOut,strict,ndx){if(k==undefined&&skipKeyPressEvent)return false;skipKeyPressEvent=true;var input=this,$input=$(input);e=e||window.event;var k=checkval?k:e.which||e.charCode||e.keyCode;if(checkval!==true&&(!(e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable))){return true}else{if(k){if(checkval!==true&&k==46&&e.shiftKey==false&&opts.radixPoint==",")k=44;var pos,results,result,c=String.fromCharCode(k);if(checkval){var pcaret=strict?ndx:getActiveMaskSet()["lastValidPosition"]+1;pos={begin:pcaret,end:pcaret}}else{pos=caret(input)}var isSlctn=isSelection(pos.begin,pos.end),redetermineLVP=false,initialIndex=activeMasksetIndex;if(isSlctn){activeMasksetIndex=initialIndex;$.each(masksets,function(ndx,lmnt){if(typeof lmnt=="object"){activeMasksetIndex=ndx;getActiveMaskSet()["undoBuffer"]=getActiveBuffer().join("")}});HandleRemove(input,opts.keyCode.DELETE,pos);if(!opts.insertMode){$.each(masksets,function(ndx,lmnt){if(typeof lmnt=="object"){activeMasksetIndex=ndx;shiftR(pos.begin,getMaskLength());getActiveMaskSet()["lastValidPosition"]=seekNext(getActiveMaskSet()["lastValidPosition"])}})}activeMasksetIndex=initialIndex}var radixPosition=getActiveBuffer().join("").indexOf(opts.radixPoint);if(opts.isNumeric&&checkval!==true&&radixPosition!=-1){if(opts.greedy&&pos.begin<=radixPosition){pos.begin=seekPrevious(pos.begin);pos.end=pos.begin}else if(c==opts.radixPoint){pos.begin=radixPosition;pos.end=pos.begin}}var p=pos.begin;results=isValid(p,c,strict);if(strict===true)results=[{activeMasksetIndex:activeMasksetIndex,result:results}];var minimalForwardPosition=-1;$.each(results,function(index,result){activeMasksetIndex=result["activeMasksetIndex"];getActiveMaskSet()["writeOutBuffer"]=true;var np=result["result"];if(np!==false){var refresh=false,buffer=getActiveBuffer();if(np!==true){refresh=np["refresh"];p=np.pos!=undefined?np.pos:p;c=np.c!=undefined?np.c:c}if(refresh!==true){if(opts.insertMode==true){var lastUnmaskedPosition=getMaskLength();var bfrClone=buffer.slice();while(getBufferElement(bfrClone,lastUnmaskedPosition,true)!=getPlaceHolder(lastUnmaskedPosition)&&lastUnmaskedPosition>=p){lastUnmaskedPosition=lastUnmaskedPosition==0?-1:seekPrevious(lastUnmaskedPosition)}if(lastUnmaskedPosition>=p){shiftR(p,getMaskLength(),c);var lvp=getActiveMaskSet()["lastValidPosition"],nlvp=seekNext(lvp);if(nlvp!=getMaskLength()&&lvp>=p&&getBufferElement(getActiveBuffer(),nlvp,true)!=getPlaceHolder(nlvp)){getActiveMaskSet()["lastValidPosition"]=nlvp}}else getActiveMaskSet()["writeOutBuffer"]=false}else setBufferElement(buffer,p,c,true);if(minimalForwardPosition==-1||minimalForwardPosition>seekNext(p)){minimalForwardPosition=seekNext(p)}}else if(!strict){var nextPos=p<getMaskLength()?p+1:p;if(minimalForwardPosition==-1||minimalForwardPosition>nextPos){minimalForwardPosition=nextPos}}if(minimalForwardPosition>getActiveMaskSet()["p"])getActiveMaskSet()["p"]=minimalForwardPosition}});if(strict!==true){activeMasksetIndex=initialIndex;determineActiveMasksetIndex()}if(writeOut!==false){$.each(results,function(ndx,rslt){if(rslt["activeMasksetIndex"]==activeMasksetIndex){result=rslt;return false}});if(result!=undefined){var self=this;setTimeout(function(){opts.onKeyValidation.call(self,result["result"],opts)},0);if(getActiveMaskSet()["writeOutBuffer"]&&result["result"]!==false){var buffer=getActiveBuffer();var newCaretPosition;if(checkval){newCaretPosition=undefined}else if(opts.numericInput){if(p>radixPosition){newCaretPosition=seekPrevious(minimalForwardPosition)}else if(c==opts.radixPoint){newCaretPosition=minimalForwardPosition-1}else newCaretPosition=seekPrevious(minimalForwardPosition-1)}else{newCaretPosition=minimalForwardPosition}writeBuffer(input,buffer,newCaretPosition);if(checkval!==true){setTimeout(function(){if(isComplete(buffer)===true)$input.trigger("complete");
skipInputEvent=true;$input.trigger("input")},0)}}else if(isSlctn){getActiveMaskSet()["buffer"]=getActiveMaskSet()["undoBuffer"].split("")}}}if(opts.showTooltip){$input.prop("title",getActiveMaskSet()["mask"])}if(e)e.preventDefault?e.preventDefault():e.returnValue=false}}}function keyupEvent(e){var $input=$(this),input=this,k=e.keyCode,buffer=getActiveBuffer();if(androidchrome&&k==opts.keyCode.BACKSPACE){if(chromeValueOnInput==input._valueGet())keydownEvent.call(this,e)}opts.onKeyUp.call(this,e,buffer,opts);if(k==opts.keyCode.TAB&&opts.showMaskOnFocus){if($input.hasClass("focus.inputmask")&&input._valueGet().length==0){buffer=getActiveBufferTemplate().slice();writeBuffer(input,buffer);caret(input,0);valueOnFocus=getActiveBuffer().join("")}else{writeBuffer(input,buffer);if(buffer.join("")==getActiveBufferTemplate().join("")&&$.inArray(opts.radixPoint,buffer)!=-1){caret(input,TranslatePosition(0));$input.click()}else caret(input,TranslatePosition(0),TranslatePosition(getMaskLength()))}}}function inputEvent(e){if(skipInputEvent===true){skipInputEvent=false;return true}var input=this,$input=$(input);chromeValueOnInput=getActiveBuffer().join("");checkVal(input,false,false);writeBuffer(input,getActiveBuffer());if(isComplete(getActiveBuffer())===true)$input.trigger("complete");$input.click()}function mask(el){$el=$(el);if($el.is(":input")){$el.data("_inputmask",{masksets:masksets,activeMasksetIndex:activeMasksetIndex,opts:opts,isRTL:false});if(opts.showTooltip){$el.prop("title",getActiveMaskSet()["mask"])}getActiveMaskSet()["greedy"]=getActiveMaskSet()["greedy"]?getActiveMaskSet()["greedy"]:getActiveMaskSet()["repeat"]==0;if($el.attr("maxLength")!=null){var maxLength=$el.prop("maxLength");if(maxLength>-1){$.each(masksets,function(ndx,ms){if(typeof ms=="object"){if(ms["repeat"]=="*"){ms["repeat"]=maxLength}}})}if(getMaskLength()>=maxLength&&maxLength>-1){if(maxLength<getActiveBufferTemplate().length)getActiveBufferTemplate().length=maxLength;if(getActiveMaskSet()["greedy"]==false){getActiveMaskSet()["repeat"]=Math.round(maxLength/getActiveBufferTemplate().length)}$el.prop("maxLength",getMaskLength()*2)}}patchValueProperty(el);if(opts.numericInput)opts.isNumeric=opts.numericInput;if(el.dir=="rtl"||opts.numericInput&&opts.rightAlignNumerics||opts.isNumeric&&opts.rightAlignNumerics)$el.css("text-align","right");if(el.dir=="rtl"||opts.numericInput){el.dir="ltr";$el.removeAttr("dir");var inputData=$el.data("_inputmask");inputData["isRTL"]=true;$el.data("_inputmask",inputData);isRTL=true}$el.unbind(".inputmask");$el.removeClass("focus.inputmask");$el.closest("form").bind("submit",function(){if(valueOnFocus!=getActiveBuffer().join("")){$el.change()}}).bind("reset",function(){setTimeout(function(){$el.trigger("setvalue")},0)});$el.bind("mouseenter.inputmask",function(){var $input=$(this),input=this;if(!$input.hasClass("focus.inputmask")&&opts.showMaskOnHover){if(input._valueGet()!=getActiveBuffer().join("")){writeBuffer(input,getActiveBuffer())}}}).bind("blur.inputmask",function(){var $input=$(this),input=this,nptValue=input._valueGet(),buffer=getActiveBuffer();$input.removeClass("focus.inputmask");if(valueOnFocus!=getActiveBuffer().join("")){$input.change()}if(opts.clearMaskOnLostFocus&&nptValue!=""){if(nptValue==getActiveBufferTemplate().join(""))input._valueSet("");else{clearOptionalTail(input)}}if(isComplete(buffer)===false){$input.trigger("incomplete");if(opts.clearIncomplete){$.each(masksets,function(ndx,ms){if(typeof ms=="object"){ms["buffer"]=ms["_buffer"].slice();ms["lastValidPosition"]=-1}});activeMasksetIndex=0;if(opts.clearMaskOnLostFocus)input._valueSet("");else{buffer=getActiveBufferTemplate().slice();writeBuffer(input,buffer)}}}}).bind("focus.inputmask",function(){var $input=$(this),input=this,nptValue=input._valueGet();if(opts.showMaskOnFocus&&!$input.hasClass("focus.inputmask")&&(!opts.showMaskOnHover||opts.showMaskOnHover&&nptValue=="")){if(input._valueGet()!=getActiveBuffer().join("")){writeBuffer(input,getActiveBuffer(),seekNext(getActiveMaskSet()["lastValidPosition"]))}}$input.addClass("focus.inputmask");valueOnFocus=getActiveBuffer().join("")}).bind("mouseleave.inputmask",function(){var $input=$(this),input=this;if(opts.clearMaskOnLostFocus){if(!$input.hasClass("focus.inputmask")&&input._valueGet()!=$input.attr("placeholder")){if(input._valueGet()==getActiveBufferTemplate().join("")||input._valueGet()=="")input._valueSet("");else{clearOptionalTail(input)}}}}).bind("click.inputmask",function(){var input=this;setTimeout(function(){var selectedCaret=caret(input),buffer=getActiveBuffer();if(selectedCaret.begin==selectedCaret.end){var clickPosition=isRTL?TranslatePosition(selectedCaret.begin):selectedCaret.begin,lvp=getActiveMaskSet()["lastValidPosition"],lastPosition;if(opts.isNumeric){lastPosition=opts.skipRadixDance===false&&opts.radixPoint!=""&&$.inArray(opts.radixPoint,buffer)!=-1?opts.numericInput?seekNext($.inArray(opts.radixPoint,buffer)):$.inArray(opts.radixPoint,buffer):seekNext(lvp)}else{lastPosition=seekNext(lvp)}if(clickPosition<lastPosition){if(isMask(clickPosition))caret(input,clickPosition);else caret(input,seekNext(clickPosition))}else caret(input,lastPosition)}},0)}).bind("dblclick.inputmask",function(){var input=this;setTimeout(function(){caret(input,0,seekNext(getActiveMaskSet()["lastValidPosition"]))},0)}).bind(pasteEvent+".inputmask dragdrop.inputmask drop.inputmask",function(e){if(skipInputEvent===true){skipInputEvent=false;return true}var input=this,$input=$(input);if(e.type=="propertychange"&&input._valueGet().length<=getMaskLength()){return true}setTimeout(function(){var pasteValue=opts.onBeforePaste!=undefined?opts.onBeforePaste.call(this,input._valueGet()):input._valueGet();checkVal(input,true,false,pasteValue.split(""),true);if(isComplete(getActiveBuffer())===true)$input.trigger("complete");$input.click()},0)}).bind("setvalue.inputmask",function(){var input=this;checkVal(input,true);valueOnFocus=getActiveBuffer().join("");if(input._valueGet()==getActiveBufferTemplate().join(""))input._valueSet("")}).bind("complete.inputmask",opts.oncomplete).bind("incomplete.inputmask",opts.onincomplete).bind("cleared.inputmask",opts.oncleared).bind("keyup.inputmask",keyupEvent);if(androidchrome){$el.bind("input.inputmask",inputEvent)}else{$el.bind("keydown.inputmask",keydownEvent).bind("keypress.inputmask",keypressEvent)}if(msie10)$el.bind("input.inputmask",inputEvent);checkVal(el,true,false);valueOnFocus=getActiveBuffer().join("");var activeElement;try{activeElement=document.activeElement}catch(e){}if(activeElement===el){$el.addClass("focus.inputmask");caret(el,seekNext(getActiveMaskSet()["lastValidPosition"]))}else if(opts.clearMaskOnLostFocus){if(getActiveBuffer().join("")==getActiveBufferTemplate().join("")){el._valueSet("")}else{clearOptionalTail(el)}}else{writeBuffer(el,getActiveBuffer())}installEventRuler(el)}}if(actionObj!=undefined){switch(actionObj["action"]){case"isComplete":return isComplete(actionObj["buffer"]);case"unmaskedvalue":isRTL=actionObj["$input"].data("_inputmask")["isRTL"];return unmaskedvalue(actionObj["$input"],actionObj["skipDatepickerCheck"]);case"mask":mask(actionObj["el"]);break;case"format":$el=$({});$el.data("_inputmask",{masksets:masksets,activeMasksetIndex:activeMasksetIndex,opts:opts,isRTL:opts.numericInput});if(opts.numericInput){opts.isNumeric=opts.numericInput;isRTL=true}checkVal($el,false,false,actionObj["value"].split(""),true);return getActiveBuffer().join("")}}}$.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},escapeChar:"\\",mask:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:true,autoUnmask:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,aliases:{},onKeyUp:$.noop,onKeyDown:$.noop,onBeforePaste:undefined,onUnMask:undefined,showMaskOnFocus:true,showMaskOnHover:true,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",showTooltip:false,numericInput:false,isNumeric:false,radixPoint:"",skipRadixDance:false,rightAlignNumerics:true,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(buffer,greedy,repeat,currentBuffer,opts){var calculatedLength=buffer.length;if(!greedy){if(repeat=="*"){calculatedLength=currentBuffer.length+1}else if(repeat>1){calculatedLength+=buffer.length*(repeat-1)}}return calculatedLength}},escapeRegex:function(str){var specials=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return str.replace(new RegExp("(\\"+specials.join("|\\")+")","gim"),"\\$1")},format:function(value,options){var opts=$.extend(true,{},$.inputmask.defaults,options);resolveAlias(opts.alias,options,opts);return maskScope(generateMaskSets(opts),0,opts,{action:"format",value:value})}};$.fn.inputmask=function(fn,options){var opts=$.extend(true,{},$.inputmask.defaults,options),masksets,activeMasksetIndex=0;if(typeof fn==="string"){switch(fn){case"mask":resolveAlias(opts.alias,options,opts);masksets=generateMaskSets(opts);if(masksets.length==0){return this}return this.each(function(){maskScope($.extend(true,{},masksets),0,opts,{action:"mask",el:this})});case"unmaskedvalue":var $input=$(this),input=this;if($input.data("_inputmask")){masksets=$input.data("_inputmask")["masksets"];activeMasksetIndex=$input.data("_inputmask")["activeMasksetIndex"];opts=$input.data("_inputmask")["opts"];return maskScope(masksets,activeMasksetIndex,opts,{action:"unmaskedvalue",$input:$input})}else return $input.val();case"remove":return this.each(function(){var $input=$(this),input=this;if($input.data("_inputmask")){masksets=$input.data("_inputmask")["masksets"];activeMasksetIndex=$input.data("_inputmask")["activeMasksetIndex"];opts=$input.data("_inputmask")["opts"];input._valueSet(maskScope(masksets,activeMasksetIndex,opts,{action:"unmaskedvalue",$input:$input,skipDatepickerCheck:true}));$input.removeData("_inputmask");$input.unbind(".inputmask");$input.removeClass("focus.inputmask");var valueProperty;if(Object.getOwnPropertyDescriptor)valueProperty=Object.getOwnPropertyDescriptor(input,"value");if(valueProperty&&valueProperty.get){if(input._valueGet){Object.defineProperty(input,"value",{get:input._valueGet,set:input._valueSet})}}else if(document.__lookupGetter__&&input.__lookupGetter__("value")){if(input._valueGet){input.__defineGetter__("value",input._valueGet);input.__defineSetter__("value",input._valueSet)}}try{delete input._valueGet;delete input._valueSet}catch(e){input._valueGet=undefined;input._valueSet=undefined}}});break;case"getemptymask":if(this.data("_inputmask")){masksets=this.data("_inputmask")["masksets"];activeMasksetIndex=this.data("_inputmask")["activeMasksetIndex"];return masksets[activeMasksetIndex]["_buffer"].join("")}else return"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask")["opts"].autoUnmask:false;case"isComplete":masksets=this.data("_inputmask")["masksets"];activeMasksetIndex=this.data("_inputmask")["activeMasksetIndex"];opts=this.data("_inputmask")["opts"];return maskScope(masksets,activeMasksetIndex,opts,{action:"isComplete",buffer:this[0]._valueGet().split("")});case"getmetadata":if(this.data("_inputmask")){masksets=this.data("_inputmask")["masksets"];activeMasksetIndex=this.data("_inputmask")["activeMasksetIndex"];return masksets[activeMasksetIndex]["metadata"]}else return undefined;default:if(!resolveAlias(fn,options,opts)){opts.mask=fn}masksets=generateMaskSets(opts);if(masksets.length==0){return this}return this.each(function(){maskScope($.extend(true,{},masksets),activeMasksetIndex,opts,{action:"mask",el:this})});break}}else if(typeof fn=="object"){opts=$.extend(true,{},$.inputmask.defaults,fn);resolveAlias(opts.alias,fn,opts);masksets=generateMaskSets(opts);if(masksets.length==0){return this}return this.each(function(){maskScope($.extend(true,{},masksets),activeMasksetIndex,opts,{action:"mask",el:this})})}else if(fn==undefined){return this.each(function(){var attrOptions=$(this).attr("data-inputmask");if(attrOptions&&attrOptions!=""){try{attrOptions=attrOptions.replace(new RegExp("'","g"),'"');var dataoptions=$.parseJSON("{"+attrOptions+"}");$.extend(true,dataoptions,options);opts=$.extend(true,{},$.inputmask.defaults,dataoptions);resolveAlias(opts.alias,dataoptions,opts);opts.alias=undefined;$(this).inputmask(opts)}catch(ex){}}})}}}})(jQuery);(function($){var _iCheck="iCheck",_iCheckHelper=_iCheck+"-helper",_checkbox="checkbox",_radio="radio",_checked="checked",_unchecked="un"+_checked,_disabled="disabled",_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);$.fn[_iCheck]=function(options,fire){var handle='input[type="'+_checkbox+'"], input[type="'+_radio+'"]',stack=$(),walker=function(object){object.each(function(){var self=$(this);if(self.is(handle)){stack=stack.add(self)}else{stack=stack.add(self.find(handle))}})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(options)){options=options.toLowerCase();walker(this);return stack.each(function(){var self=$(this);if(options=="destroy"){tidy(self,"ifDestroyed")}else{operate(self,true,options)}if($.isFunction(fire)){fire()}})}else if(typeof options=="object"||!options){var settings=$.extend({checkedClass:_checked,disabledClass:_disabled,indeterminateClass:_indeterminate,labelHover:true,aria:false},options),selector=settings.handle,hoverClass=settings.hoverClass||"hover",focusClass=settings.focusClass||"focus",activeClass=settings.activeClass||"active",labelHover=!!settings.labelHover,labelHoverClass=settings.labelHoverClass||"hover",area=(""+settings.increaseArea).replace("%","")|0;if(selector==_checkbox||selector==_radio){handle='input[type="'+selector+'"]'}if(area<-50){area=-50}walker(this);return stack.each(function(){var self=$(this);tidy(self);var node=this,id=node.id,offset=-area+"%",size=100+area*2+"%",layer={position:"absolute",top:offset,left:offset,display:"block",width:size,height:size,margin:0,padding:0,background:"#fff",border:0,opacity:0},hide=_mobile?{position:"absolute",visibility:"hidden"}:area?layer:{position:"absolute",opacity:0},className=node[_type]==_checkbox?settings.checkboxClass||"i"+_checkbox:settings.radioClass||"i"+_radio,label=$(_label+'[for="'+id+'"]').add(self.closest(_label)),aria=!!settings.aria,ariaID=_iCheck+"-"+Math.random().toString(36).replace("0.",""),parent='<div class="'+className+'" '+(aria?'role="'+node[_type]+'" ':""),helper;if(label.length&&aria){label.each(function(){parent+='aria-labelledby="';if(this.id){parent+=this.id}else{this.id=ariaID;parent+=ariaID}parent+='"'})}parent=self.wrap(parent+"/>")[_callback]("ifCreated").parent().append(settings.insert);helper=$('<ins class="'+_iCheckHelper+'"/>').css(layer).appendTo(parent);self.data(_iCheck,{o:settings,s:self.attr("style")}).css(hide);!!settings.inheritClass&&parent[_add](node.className||"");!!settings.inheritID&&id&&parent.attr("id",_iCheck+"-"+id);parent.css("position")=="static"&&parent.css("position","relative");operate(self,true,_update);if(label.length){label.on(_click+".i mouseover.i mouseout.i "+_touch,function(event){var type=event[_type],item=$(this);if(!node[_disabled]){if(type==_click){if($(event.target).is("a")){return}operate(self,false,true)}else if(labelHover){if(/ut|nd/.test(type)){parent[_remove](hoverClass);item[_remove](labelHoverClass)}else{parent[_add](hoverClass);item[_add](labelHoverClass)}}if(_mobile){event.stopPropagation()}else{return false}}})}self.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(event){var type=event[_type],key=event.keyCode;if(type==_click){return false}else if(type=="keydown"&&key==32){if(!(node[_type]==_radio&&node[_checked])){if(node[_checked]){off(self,_checked)}else{on(self,_checked)}}return false}else if(type=="keyup"&&node[_type]==_radio){!node[_checked]&&on(self,_checked)}else if(/us|ur/.test(type)){parent[type=="blur"?_remove:_add](focusClass)}});helper.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(event){var type=event[_type],toggle=/wn|up/.test(type)?activeClass:hoverClass;if(!node[_disabled]){if(type==_click){operate(self,false,true)}else{if(/wn|er|in/.test(type)){parent[_add](toggle)}else{parent[_remove](toggle+" "+activeClass)}if(label.length&&labelHover&&toggle==hoverClass){label[/ut|nd/.test(type)?_remove:_add](labelHoverClass)}}if(_mobile){event.stopPropagation()}else{return false}}})})}else{return this}};function operate(input,direct,method){var node=input[0],state=/er/.test(method)?_indeterminate:/bl/.test(method)?_disabled:_checked,active=method==_update?{checked:node[_checked],disabled:node[_disabled],indeterminate:input.attr(_indeterminate)=="true"||input.attr(_determinate)=="false"}:node[state];if(/^(ch|di|in)/.test(method)&&!active){on(input,state)}else if(/^(un|en|de)/.test(method)&&active){off(input,state)}else if(method==_update){for(var state in active){if(active[state]){on(input,state,true)}else{off(input,state,true)}}}else if(!direct||method=="toggle"){if(!direct){input[_callback]("ifClicked")}if(active){if(node[_type]!==_radio){off(input,state)}}else{on(input,state)}}}function on(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:"enabled",regular=option(input,callback+capitalize(node[_type])),specific=option(input,state+capitalize(node[_type]));if(node[state]!==true){if(!keep&&state==_checked&&node[_type]==_radio&&node.name){var form=input.closest("form"),inputs='input[name="'+node.name+'"]';inputs=form.length?form.find(inputs):$(inputs);inputs.each(function(){if(this!==node&&$(this).data(_iCheck)){off($(this),state)}})}if(indeterminate){node[state]=true;if(node[_checked]){off(input,_checked,"force")}}else{if(!keep){node[state]=true}if(checked&&node[_indeterminate]){off(input,_indeterminate,false)}}callbacks(input,checked,state,keep)}if(node[_disabled]&&!!option(input,_cursor,true)){parent.find("."+_iCheckHelper).css(_cursor,"default")}parent[_add](specific||option(input,state)||"");disabled?parent.attr("aria-disabled","true"):parent.attr("aria-checked",indeterminate?"mixed":"true");parent[_remove](regular||option(input,callback)||"")}function off(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:"enabled",regular=option(input,callback+capitalize(node[_type])),specific=option(input,state+capitalize(node[_type]));if(node[state]!==false){if(indeterminate||!keep||keep=="force"){node[state]=false}callbacks(input,checked,callback,keep)}if(!node[_disabled]&&!!option(input,_cursor,true)){parent.find("."+_iCheckHelper).css(_cursor,"pointer")}parent[_remove](specific||option(input,state)||"");disabled?parent.attr("aria-disabled","false"):parent.attr("aria-checked","false");parent[_add](regular||option(input,callback)||"")}function tidy(input,callback){if(input.data(_iCheck)){input.parent().html(input.attr("style",input.data(_iCheck).s||""));if(callback){input[_callback](callback)}input.off(".i").unwrap();$(_label+'[for="'+input[0].id+'"]').add(input.closest(_label)).off(".i")}}function option(input,state,regular){if(input.data(_iCheck)){return input.data(_iCheck).o[state+(regular?"":"Class")]}}function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1)}function callbacks(input,checked,callback,keep){if(!keep){if(checked){input[_callback]("ifToggled")}input[_callback]("ifChanged")[_callback]("if"+capitalize(callback))}}})(window.jQuery||window.Zepto);